<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html lang="en" data-rh="lang"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script async="" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/branch-latest.min.js.download"></script><script async="" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/analytics.js.download"></script><script>!function(c,f){var t,o,i,e=[],r={passive:!0,capture:!0},n=new Date,a="pointerup",u="pointercancel";function p(n,e){t||(t=e,o=n,i=new Date,w(f),s())}function s(){0<=o&&o<i-n&&(e.forEach(function(n){n(o,t)}),e=[])}function l(n){if(n.cancelable){var e=(1e12<n.timeStamp?new Date:performance.now())-n.timeStamp;"pointerdown"==n.type?function(n,e){function t(){p(n,e),i()}function o(){i()}function i(){f(a,t,r),f(u,o,r)}c(a,t,r),c(u,o,r)}(e,n):p(e,n)}}function w(e){["click","mousedown","keydown","touchstart","pointerdown"].forEach(function(n){e(n,l,r)})}w(c),self.perfMetrics=self.perfMetrics||{},self.perfMetrics.onFirstInputDelay=function(n){e.push(n),s()}}(addEventListener,removeEventListener)</script><title>Churn Prediction and Prevention in Python - Towards Data Science</title><meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"><meta data-rh="true" name="theme-color" content="#000000"><meta data-rh="true" name="twitter:app:name:iphone" content="Medium"><meta data-rh="true" name="twitter:app:id:iphone" content="828256236"><meta data-rh="true" property="al:ios:app_name" content="Medium"><meta data-rh="true" property="al:ios:app_store_id" content="828256236"><meta data-rh="true" property="al:android:package" content="com.medium.reader"><meta data-rh="true" property="fb:app_id" content="542599432471018"><meta data-rh="true" property="og:site_name" content="Medium"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2019-08-28T14:23:52.501Z"><meta data-rh="true" name="title" content="Churn Prediction and Prevention in Python - Towards Data Science"><meta data-rh="true" property="og:title" content="Churn Prediction and Prevention in Python"><meta data-rh="true" property="twitter:title" content="Churn Prediction and Prevention in Python"><meta data-rh="true" name="twitter:site" content="@TDataScience"><meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/2d454e5fd9a5"><meta data-rh="true" property="al:android:url" content="medium://p/2d454e5fd9a5"><meta data-rh="true" property="al:ios:url" content="medium://p/2d454e5fd9a5"><meta data-rh="true" property="al:android:app_name" content="Medium"><meta data-rh="true" name="description" content=" Churn prediction is difficult. Before you can do anything to prevent customers leaving, you need to know everything from who’s going to leave and when, to how much it will impact your bottom line…"><meta data-rh="true" property="og:description" content="Using survival analysis to predict and prevent churn in Python with the lifelines package and the Cox Proportional Hazards Model."><meta data-rh="true" property="twitter:description" content="Using survival analysis to predict and prevent churn in Python with the lifelines package and the Cox Proportional Hazards Model."><meta data-rh="true" property="og:url" content="https://towardsdatascience.com/churn-prediction-and-prevention-in-python-2d454e5fd9a5"><meta data-rh="true" property="al:web:url" content="https://towardsdatascience.com/churn-prediction-and-prevention-in-python-2d454e5fd9a5"><meta data-rh="true" property="og:image" content="https://miro.medium.com/max/806/0*CHF7g5Tqt6580WQh.png"><meta data-rh="true" name="twitter:image:src" content="https://miro.medium.com/max/806/0*CHF7g5Tqt6580WQh.png"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="article:author" content="https://towardsdatascience.com/@carldawson"><meta data-rh="true" name="author" content="Carl Dawson"><meta data-rh="true" name="robots" content="index,follow"><meta data-rh="true" name="referrer" content="unsafe-url"><meta data-rh="true" name="twitter:label1" value="Reading time"><meta data-rh="true" name="twitter:data1" value="14 min read"><meta data-rh="true" name="parsely-post-id" content="2d454e5fd9a5"><link data-rh="true" rel="publisher" href="https://plus.google.com/103654360130207659246"><link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium" href="https://towardsdatascience.com/osd.xml"><link data-rh="true" rel="apple-touch-icon" sizes="152x152" href="https://cdn-images-1.medium.com/fit/c/152/152/1*8I-HPL0bfoIzGied-dzOvA.png"><link data-rh="true" rel="apple-touch-icon" sizes="120x120" href="https://cdn-images-1.medium.com/fit/c/120/120/1*8I-HPL0bfoIzGied-dzOvA.png"><link data-rh="true" rel="apple-touch-icon" sizes="76x76" href="https://cdn-images-1.medium.com/fit/c/76/76/1*8I-HPL0bfoIzGied-dzOvA.png"><link data-rh="true" rel="apple-touch-icon" sizes="60x60" href="https://cdn-images-1.medium.com/fit/c/60/60/1*8I-HPL0bfoIzGied-dzOvA.png"><link data-rh="true" rel="mask-icon" href="https://cdn-static-1.medium.com/_/fp/icons/monogram-mask.KPLCSFEZviQN0jQ7veN2RQ.svg" color="#171717"><link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css" href="./Churn Prediction and Prevention in Python - Towards Data Science_files/m2.css"><link data-rh="true" rel="author" href="https://towardsdatascience.com/@carldawson"><link data-rh="true" rel="canonical" href="https://towardsdatascience.com/churn-prediction-and-prevention-in-python-2d454e5fd9a5"><link data-rh="true" rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/2d454e5fd9a5"><script data-rh="true">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-24232453-2', 'auto');
ga('send', 'pageview');</script><link rel="preload" href="./Churn Prediction and Prevention in Python - Towards Data Science_files/16180790160.js.download" as="script"><style type="text/css" data-fela-rehydration="461" data-fela-type="STATIC">html{box-sizing:border-box}*, *:before, *:after{box-sizing:inherit}body{margin:0;padding:0;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;color:rgba(0,0,0,0.8);position:relative;min-height:100vh}h1, h2, h3, h4, h5, h6, dl, dd, ol, ul, menu, figure, blockquote, p, pre, form{margin:0}menu, ol, ul{padding:0;list-style:none;list-style-image:none}main{display:block}a{color:inherit;text-decoration:none}a, button, input{-webkit-tap-highlight-color:transparent}img, svg{vertical-align:middle}button{background:transparent;overflow:visible}button, input, optgroup, select, textarea{margin:0}</style><style type="text/css" data-fela-rehydration="461" data-fela-type="KEYFRAME">@-webkit-keyframes k1{0%{transform:scale(1);opacity:1}70%{transform:scale(1.4);opacity:0}100%{opacity:0}}@-moz-keyframes k1{0%{transform:scale(1);opacity:1}70%{transform:scale(1.4);opacity:0}100%{opacity:0}}@keyframes k1{0%{transform:scale(1);opacity:1}70%{transform:scale(1.4);opacity:0}100%{opacity:0}}@-webkit-keyframes k1{0%{transform:scale(1);opacity:1}70%{transform:scale(1.4);opacity:0}100%{opacity:0}}@-moz-keyframes k1{0%{transform:scale(1);opacity:1}70%{transform:scale(1.4);opacity:0}100%{opacity:0}}@keyframes k1{0%{transform:scale(1);opacity:1}70%{transform:scale(1.4);opacity:0}100%{opacity:0}}@-webkit-keyframes k2{0%{transform:translateY(100%)}90%{transform:translateY(-5%)}100%{transform:translateY(0%)}}@-moz-keyframes k2{0%{transform:translateY(100%)}90%{transform:translateY(-5%)}100%{transform:translateY(0%)}}@keyframes k2{0%{transform:translateY(100%)}90%{transform:translateY(-5%)}100%{transform:translateY(0%)}}@-webkit-keyframes k3{0%{transform:translateY(0%);opacity:1}10%{transform:translateY(-5%);opacity:1}100%{transform:translateY(100%);opacity:0}}@-moz-keyframes k3{0%{transform:translateY(0%);opacity:1}10%{transform:translateY(-5%);opacity:1}100%{transform:translateY(100%);opacity:0}}@keyframes k3{0%{transform:translateY(0%);opacity:1}10%{transform:translateY(-5%);opacity:1}100%{transform:translateY(100%);opacity:0}}</style><style type="text/css" data-fela-rehydration="461" data-fela-type="RULE">.a{font-family:medium-content-sans-serif-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif}.b{font-weight:400}.c{background-color:rgba(255, 255, 255, 1)}.l{height:100vh}.m{width:100vw}.n{display:flex}.o{align-items:center}.p{justify-content:center}.q{fill:rgba(0, 0, 0, 0.84)}.r{display:block}.s{position:fixed}.t{top:0}.u{left:0}.v{right:0}.w{z-index:500}.x{box-shadow:0 4px 12px 0 rgba(0, 0, 0, 0.05)}.ai{max-width:1192px}.aj{min-width:0}.ak{width:100%}.al{height:65px}.ao{flex:1 0 auto}.ap{flex:0 0 auto}.aq{visibility:hidden}.ar{margin-left:16px}.as{font-family:medium-content-sans-serif-font, "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Geneva, Arial, sans-serif}.at{font-style:normal}.au{line-height:20px}.av{font-size:15.8px}.aw{letter-spacing:0px}.ax{color:rgba(0, 0, 0, 0.54)}.ay{fill:rgba(0, 0, 0, 0.54)}.az{color:rgba(90, 118, 144, 1)}.ba{fill:rgba(102, 138, 170, 1)}.bb{font-size:inherit}.bc{border:inherit}.bd{font-family:inherit}.be{letter-spacing:inherit}.bf{font-weight:inherit}.bg{padding:0}.bh{margin:0}.bi:hover{cursor:pointer}.bj:hover{color:rgba(84, 108, 131, 1)}.bk:hover{fill:rgba(90, 118, 144, 1)}.bl:focus{outline:none}.bm:disabled{cursor:default}.bn:disabled{color:rgba(3, 168, 124, 0.5)}.bo:disabled{fill:rgba(3, 168, 124, 0.5)}.bp{padding:8px 16px}.bq{background:0}.br{border-color:rgba(102, 138, 170, 1)}.bs:hover{border-color:rgba(90, 118, 144, 1)}.bt{border-radius:4px}.bu{border-width:1px}.bv{border-style:solid}.bw{box-sizing:border-box}.bx{display:inline-block}.by{text-decoration:none}.bz{border-top:none}.ca{background-color:rgba(53, 88, 118, 1)}.cc{height:54px}.cd{overflow:hidden}.ce{margin-right:40px}.cf{height:36px}.cg{width:97px}.ch{overflow:auto}.ci{flex:0 1 auto}.cj{list-style-type:none}.ck{line-height:40px}.cl{white-space:nowrap}.cm{overflow-x:auto}.cn{align-items:flex-start}.co{margin-top:20px}.cp{padding-top:20px}.cq{height:80px}.cr{height:20px}.cs{margin-right:15px}.ct{margin-left:15px}.cu:first-child{margin-left:0}.cv{min-width:1px}.cw{background-color:rgba(197, 210, 225, 1)}.cx{font-weight:300}.cy{font-size:15px}.cz{color:rgba(197, 210, 225, 1)}.da{text-transform:uppercase}.db{letter-spacing:1px}.dc{color:inherit}.dd{fill:inherit}.de:hover{color:rgba(251, 255, 255, 1)}.df:hover{fill:rgba(233, 241, 250, 1)}.dg:disabled{color:rgba(150, 171, 191, 1)}.dh:disabled{fill:rgba(150, 171, 191, 1)}.di{margin-bottom:0px}.dj{height:119px}.dm{padding-left:24px}.dn{padding-right:24px}.do{margin-left:auto}.dp{margin-right:auto}.dq{max-width:728px}.dr{flex-direction:column}.ds{position:absolute}.dt{top:calc(100vh + 100px)}.du{bottom:calc(100vh + 100px)}.dv{width:10px}.dw{pointer-events:none}.dx{word-break:break-word}.dy{word-wrap:break-word}.dz:after{display:block}.ea:after{content:""}.eb:after{clear:both}.ec{max-width:680px}.ed{line-height:1.23}.ee{letter-spacing:0}.ef{color:rgba(0, 0, 0, 0.84)}.eg{font-family:medium-content-title-font, Georgia, Cambria, "Times New Roman", Times, serif}.eh{font-size:40px}.en{margin-bottom:-0.27em}.eo{line-height:48px}.ep{line-height:1.394}.eq{font-size:25px}.ew{margin-bottom:-0.42em}.ex{font-size:24px}.ey{line-height:32px}.ez{margin-top:32px}.fa{justify-content:space-between}.fe{border-radius:50%}.ff{height:48px}.fg{width:48px}.fh{margin-left:12px}.fi{margin-bottom:2px}.fk{font-size:16px}.fl{max-height:20px}.fm{text-overflow:ellipsis}.fn{display:-webkit-box}.fo{-webkit-line-clamp:1}.fp{-webkit-box-orient:vertical}.fq:hover{text-decoration:underline}.fr:disabled{color:rgba(0, 0, 0, 0.54)}.fs:disabled{fill:rgba(0, 0, 0, 0.54)}.ft{margin-left:8px}.fu{padding:0px 8px}.fv{border-color:rgba(0, 0, 0, 0.54)}.fw:hover{color:rgba(0, 0, 0, 0.97)}.fx:hover{fill:rgba(0, 0, 0, 0.97)}.fy:hover{border-color:rgba(0, 0, 0, 0.84)}.fz:disabled{fill:rgba(0, 0, 0, 0.76)}.ga:disabled{border-color:rgba(0, 0, 0, 0.2)}.gb:disabled{cursor:inherit}.gc:disabled:hover{color:rgba(0, 0, 0, 0.54)}.gd:disabled:hover{fill:rgba(0, 0, 0, 0.76)}.ge:disabled:hover{border-color:rgba(0, 0, 0, 0.2)}.gf{line-height:18px}.gg{align-items:flex-end}.go{padding-right:8px}.gp:hover{color:rgba(0, 0, 0, 0.9)}.gq:hover{fill:rgba(0, 0, 0, 0.9)}.gr{margin-right:-6px}.gs{line-height:1.58}.gt{letter-spacing:-0.004em}.gu{font-family:medium-content-serif-font, Georgia, Cambria, "Times New Roman", Times, serif}.hf{margin-bottom:-0.46em}.hg{line-height:1.12}.hh{letter-spacing:-0.022em}.hi{font-weight:600}.ht{margin-bottom:-0.28em}.hz{background-repeat:repeat-x}.ia{background-image:linear-gradient(to right,rgba(0, 0, 0, 0.84) 100%,rgba(0, 0, 0, 0.84) 0);background-image:url('data:image/svg+xml;utf8,<svg preserveAspectRatio="none" viewBox="0 0 1 1" xmlns="http://www.w3.org/2000/svg"><line x1="0" y1="0" x2="1" y2="1" stroke="rgba(0, 0, 0, 0.84)" /></svg>')}.ib{background-size:1px 1px}.ic{background-position:0 1.05em;background-position:0 calc(1em + 1px)}.id{max-width:1526px}.ij{clear:both}.ik{transition:transform 300ms cubic-bezier(0.2, 0, 0.2, 1)}.il{cursor:zoom-in}.im{position:relative}.in{z-index:auto}.io{opacity:0}.ip{transition:opacity 100ms 400ms}.iq{height:100%}.ir{will-change:transform}.is{transform:translateZ(0)}.it{margin:auto}.iu{background-color:rgba(0, 0, 0, 0.05)}.iv{padding-bottom:33.68283093053735%}.iw{filter:blur(20px)}.ix{transform:scale(1.1)}.iy{visibility:visible}.iz{background:rgba(255, 255, 255, 1)}.ja{padding:2px 4px}.jb{font-size:75%}.jc> strong{font-family:inherit}.jd{font-family:Menlo, Monaco, "Courier New", Courier, monospace}.je{padding:20px}.jf{background:rgba(0, 0, 0, 0.05)}.jg{line-height:1.18}.jh{margin-top:-0.09em}.ji{margin-bottom:-0.09em}.jj{white-space:pre-wrap}.jk{max-width:806px}.jl{padding-bottom:66.25310173697271%}.jr{max-width:646px}.js{padding-bottom:86.687306501548%}.jt{list-style-type:decimal}.ju{margin-left:30px}.jv{padding-left:0px}.kb{max-width:1508px}.kc{padding-bottom:99.86737400530504%}.kd{font-style:italic}.ke{max-width:1190px}.kf{padding-bottom:44.87394957983194%}.kg{max-width:774px}.kh{padding-bottom:69.25064599483204%}.ki{max-width:788px}.kj{padding-bottom:67.51269035532995%}.kk{max-width:1186px}.kl{padding-bottom:43.676222596964585%}.km{padding-bottom:34.07601572739188%}.kn{max-width:1514px}.ko{padding-bottom:34.081902245706736%}.kp{max-width:1226px}.kq{padding-bottom:64.11092985318108%}.kr{max-width:784px}.ks{padding-bottom:69.89795918367346%}.kt{max-width:1266px}.ku{padding-bottom:39.652448657187996%}.la{box-shadow:0 1px 4px rgba(0, 0, 0, 0.1), inset 0 0 0 1px rgba(0, 0, 0, 0.1)}.lb{max-height:40px}.lc{-webkit-line-clamp:2}.ld{padding:0px}.lt{padding:16px 20px}.lu{flex:1 1 auto}.lw{font-size:18px}.lx{margin-top:8px}.ly{margin-top:12px}.lz{width:160px}.ma{background-image:url(https://miro.medium.com/max/320/0*XEPb3KXTI0bxe_h2)}.mb{background-origin:border-box}.mc{background-size:cover}.md{height:167px}.me{background-position:50% 50%}.mf{max-width:100%}.mg{box-shadow:inset 0 0 0 1px rgba(0, 0, 0, 0.1)}.mh{will-change:opacity}.mi{top:calc(65px + 54px + 40px)}.ml{width:131px}.mm{padding-bottom:28px}.mn{border-bottom:1px solid rgba(0, 0, 0, 0.1)}.mo{padding-bottom:20px}.mp{padding-top:2px}.mq{max-height:120px}.mr{-webkit-line-clamp:6}.ms{padding:4px 12px}.mt{padding-top:28px}.mu{margin-bottom:19px}.mv{margin-left:-5px}.mw{margin-right:5px}.mx{outline:0}.my{border:0}.mz{user-select:none}.na{cursor:pointer}.nb> svg{pointer-events:none}.nc:active{border-style:none}.nd{-webkit-user-select:none}.ne:focus{fill:rgba(90, 118, 144, 1)}.nf{margin-top:5px}.ng button{text-align:left}.nh{width:188px}.ni{left:50%}.nj{transform:translateX(406px)}.nk{top:calc(65px + 54px + 14px)}.nm{margin-top:40px}.nn{flex-wrap:wrap}.no{margin-top:25px}.np{margin-right:8px}.nq{margin-bottom:8px}.nr{border-radius:3px}.ns{padding:5px 10px}.nt{line-height:22px}.nu{margin-top:15px}.nv{margin-right:16px}.nw{border:1px solid rgba(0, 0, 0, 0.1)}.nx{height:60px}.ny{width:60px}.ol:active{border-style:solid}.om{z-index:2}.oo{padding-top:32px}.op{border-top:1px solid rgba(0, 0, 0, 0.1)}.oq{margin-bottom:25px}.or{padding:32px 48px}.os{border:1px solid rgba(102, 138, 170, 1)}.ot{margin-bottom:32px}.ou{font-size:22px}.ov{line-height:28px}.ow{height:8px}.ox{line-height:24px}.oy{height:22px}.oz{min-height:80px}.pe{width:80px}.pf{padding-left:102px}.ph{letter-spacing:0.05em}.pi{margin-bottom:6px}.pj{font-size:28px}.pk{line-height:36px}.pl{max-width:555px}.pm{max-width:450px}.pn{display:none}.pp{padding-top:25px}.pq{color:rgba(0, 0, 0, 0.76)}.pr{opacity:1}.ps{text-align:center}.pt{margin-top:64px}.pu{background-color:rgba(0, 0, 0, 0.02)}.pv{padding:60px 0}.pw{background-color:rgba(0, 0, 0, 0.9)}.py{padding-bottom:48px}.pz{border-bottom:1px solid rgba(255, 255, 255, 0.54)}.qa{margin:0 -12px}.qb{margin:0 12px}.qc{flex:1 1 0}.qd{padding-bottom:12px}.qe:hover{color:rgba(255, 255, 255, 0.99)}.qf:hover{fill:rgba(255, 255, 255, 0.99)}.qg:disabled{color:rgba(255, 255, 255, 0.7)}.qh:disabled{fill:rgba(255, 255, 255, 0.7)}.qi{color:rgba(255, 255, 255, 0.98)}.qj{fill:rgba(255, 255, 255, 0.98)}.qk{text-align:inherit}.ql{font-size:21.6px}.qm{letter-spacing:-0.32px}.qn{color:rgba(255, 255, 255, 0.7)}.qo{fill:rgba(255, 255, 255, 0.7)}.qp{text-decoration:underline}.qq{padding-bottom:8px}.qr{padding-top:8px}.qs{width:200px}</style><style type="text/css" data-fela-rehydration="461" data-fela-type="RULE" media="all and (min-width: 1080px)">.d{display:none}.ah{margin:0 64px}.em{margin-top:0.78em}.ev{margin-top:0.74em}.gn{margin-left:30px}.hd{font-size:21px}.he{margin-top:2em}.hr{font-size:34px}.hs{margin-top:1.95em}.hy{margin-top:0.86em}.ii{margin-top:56px}.jq{margin-top:1.91em}.ka{margin-top:1.05em}.kz{margin-top:32px}.lq{padding-left:64px}.lr{padding-right:64px}.ls{max-width:1320px}</style><style type="text/css" data-fela-rehydration="461" data-fela-type="RULE" media="all and (max-width: 1079.98px)">.e{display:none}.gm{margin-left:30px}.ln{padding-left:64px}.lo{padding-right:64px}.lp{max-width:1080px}</style><style type="text/css" data-fela-rehydration="461" data-fela-type="RULE" media="all and (max-width: 903.98px)">.f{display:none}.gl{margin-left:30px}.lk{padding-left:48px}.ll{padding-right:48px}.lm{max-width:904px}</style><style type="text/css" data-fela-rehydration="461" data-fela-type="RULE" media="all and (max-width: 727.98px)">.g{display:none}.am{height:56px}.an{display:flex}.cb{display:block}.dk{margin-bottom:0px}.dl{height:110px}.fc{margin-top:32px}.fd{flex-direction:column-reverse}.gj{margin-bottom:30px}.gk{margin-left:0px}.lh{padding-left:24px}.li{padding-right:24px}.lj{max-width:728px}.lv{padding:10px 12px 10px}.pa{margin-bottom:24px}.pb{align-items:center}.pc{width:102px}.pd{position:relative}.pg{padding-left:0}.po{margin-top:24px}.px{padding:32px 0}.qt{width:140px}</style><style type="text/css" data-fela-rehydration="461" data-fela-type="RULE" media="all and (max-width: 551.98px)">.h{display:none}.ac{margin:0 24px}.ei{margin-top:0.39em}.er{margin-top:0.42em}.fb{margin-top:32px}.fj{margin-bottom:0px}.gh{margin-bottom:30px}.gi{margin-left:0px}.gv{font-size:18px}.gw{margin-top:1.56em}.hj{font-size:30px}.hk{margin-top:1.2em}.hu{margin-top:0.67em}.ie{margin-top:40px}.jm{margin-top:1.41em}.jw{margin-top:1.34em}.kv{margin-top:24px}.le{padding-left:24px}.lf{padding-right:24px}.lg{max-width:552px}</style><style type="text/css" data-fela-rehydration="461" data-fela-type="RULE" media="all and (min-width: 904px) and (max-width: 1079.98px)">.i{display:none}.ag{margin:0 64px}.el{margin-top:0.78em}.eu{margin-top:0.74em}.hb{font-size:21px}.hc{margin-top:2em}.hp{font-size:34px}.hq{margin-top:1.95em}.hx{margin-top:0.86em}.ih{margin-top:56px}.jp{margin-top:1.91em}.jz{margin-top:1.05em}.ky{margin-top:32px}</style><style type="text/css" data-fela-rehydration="461" data-fela-type="RULE" media="all and (min-width: 728px) and (max-width: 903.98px)">.j{display:none}.af{margin:0 48px}.ek{margin-top:0.78em}.et{margin-top:0.74em}.gz{font-size:21px}.ha{margin-top:2em}.hn{font-size:34px}.ho{margin-top:1.95em}.hw{margin-top:0.86em}.ig{margin-top:56px}.jo{margin-top:1.91em}.jy{margin-top:1.05em}.kx{margin-top:32px}</style><style type="text/css" data-fela-rehydration="461" data-fela-type="RULE" media="all and (min-width: 552px) and (max-width: 727.98px)">.k{display:none}.ae{margin:0 24px}.ej{margin-top:0.39em}.es{margin-top:0.42em}.gx{font-size:18px}.gy{margin-top:1.56em}.hl{font-size:30px}.hm{margin-top:1.2em}.hv{margin-top:0.67em}.if{margin-top:40px}.jn{margin-top:1.41em}.jx{margin-top:1.34em}.kw{margin-top:24px}</style><style type="text/css" data-fela-rehydration="461" data-fela-type="RULE" media="print">.ab{display:none}</style><style type="text/css" data-fela-rehydration="461" data-fela-type="RULE" media="(prefers-reduced-motion: no-preference)">.y{transition:transform 300ms ease}.z{will-change:transform}.mj{transition:opacity 200ms}.nz{transition:border-color 150ms ease}.oa::before{background:
      radial-gradient(circle, rgba(90, 118, 144, 1) 60%, transparent 70%)
    }.ob::before{border-radius:50%}.oc::before{content:""}.od::before{display:block}.oe::before{z-index:0}.of::before{left:0}.og::before{height:100%}.oh::before{position:absolute}.oi::before{top:0}.oj::before{width:100%}.ok:hover::before{animation:k1 2000ms infinite cubic-bezier(.1,.12,.25,1)}.on{transition:fill 200ms ease}</style><style type="text/css" data-fela-rehydration="461" data-fela-type="RULE" media="all and (max-width: 1198px)">.mk{display:none}</style><style type="text/css" data-fela-rehydration="461" data-fela-type="RULE" media="all and (max-width: 1230px)">.nl{display:none}</style><script charset="utf-8" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/vendors_tracing.0154598a.chunk.js.download"></script><script charset="utf-8" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/tracing.075b133f.chunk.js.download"></script><link rel="icon" href="https://miro.medium.com/fit/c/128/128/1*F0LADxTtsKOgmPa-_7iUEQ.jpeg" data-rh="true"><script type="application/ld+json" data-rh="true">{"@context":"http:\u002F\u002Fschema.org","@type":"NewsArticle","image":["https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F1200\u002F0*CHF7g5Tqt6580WQh.png"],"url":"https:\u002F\u002Ftowardsdatascience.com\u002Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5","dateCreated":"2019-03-07T13:36:00.000Z","datePublished":"2019-03-07T13:36:00.000Z","dateModified":"2019-08-28T14:23:52.748Z","headline":"Churn Prediction and Prevention in Python","name":"Churn Prediction and Prevention in Python","description":" Churn prediction is difficult. Before you can do anything to prevent customers leaving, you need to know everything from who’s going to leave and when, to how much it will impact your bottom line…","identifier":"2d454e5fd9a5","keywords":["Lite:true","Tag:Machine Learning","Tag:Data Science","Tag:SaaS","Topic:Machine Learning","Topic:Data Science","Topic:Programming","Publication:towards-data-science","Elevated:false","LockedPostSource:LOCKED_POST_SOURCE_UGC","LayerCake:3"],"author":{"@type":"Person","name":"Carl Dawson","url":"https:\u002F\u002Ftowardsdatascience.com\u002F@carldawson"},"creator":["Carl Dawson"],"publisher":{"@type":"Organization","name":"Towards Data Science","url":"towardsdatascience.com","logo":{"@type":"ImageObject","width":161,"height":60,"url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F161\u002F1*5EUO1kUYBthpOCPzRj_l2g.png"}},"mainEntityOfPage":"https:\u002F\u002Ftowardsdatascience.com\u002Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5","isAccessibleForFree":"False","hasPart":{"@type":"WebPageElement","isAccessibleForFree":"False","cssSelector":".meteredContent"}}</script><script type="text/javascript" data-rh="true">(function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://cdn.branch.io/branch-latest.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode trackCommerceEvent logEvent".split(" "), 0);
branch.init('key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm', {metadata: {}, 'no_journeys': true, 'disable_exit_animation': true, 'disable_entry_animation': true, 'tracking_disabled': null}, function(err, data) {});</script><script src="./Churn Prediction and Prevention in Python - Towards Data Science_files/saved_resource"></script></head><body><div id="root"><div class="a b c"><div class="d e f g h i j k"></div><script>document.domain = document.domain;</script><script>window.PARSELY = window.PARSELY || {autotrack: false}</script><nav class="r s t u v c w x y z ab" style=""><div class="branch-journeys-top"><div class="r c"><div class="n p"><div class="ac ae af ag ah ai aj ak"><div class="al n o am an"><div class="n o ao w"><a href="https://medium.com/?source=post_page-----2d454e5fd9a5----------------------" aria-label="Homepage" rel="noopener"><svg width="35" height="35" viewBox="5 5 35 35" class="q"><path d="M5 40V5h35v35H5zm8.56-12.63c0 .56-.03.69-.32 1.03L10.8 31.4v.4h6.97v-.4L15.3 28.4c-.29-.34-.34-.5-.34-1.03v-8.95l6.13 13.36h.71l5.26-13.36v10.64c0 .3 0 .35-.19.53l-1.85 1.8v.4h9.2v-.4l-1.83-1.8c-.18-.18-.2-.24-.2-.53V15.94c0-.3.02-.35.2-.53l1.82-1.8v-.4h-6.47l-4.62 11.55-5.2-11.54h-6.8v.4l2.15 2.63c.24.3.29.37.29.77v10.35z"></path></svg></a></div><div class="r ap w"><div class="n o"><div class="n g"><div class="iy" id="lo-post-page-navbar-sign-in-link"><div class="ar r"><span class="as b at au av aw r ax ay"><a href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5&amp;source=post_page-----2d454e5fd9a5---------------------nav_reg-" class="az ba bb bc bd be bf bg bh bi bj bk bl bm bn bo" rel="noopener">Sign in</a></span></div></div></div><div class="iy" id="lo-post-page-navbar-get-started-button"><div class="ar r"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5&amp;source=post_page-----2d454e5fd9a5---------------------nav_reg-" class="bp bq az ba br bj bk bs bi bt as b at au av aw bu bv bw bx by bl" rel="noopener">Get started</a></div></div></div></div></div></div></div></div><div class="bz r ca cb"><div class="n p"><div class="ac ae af ag ah ai aj ak"><div class="cc cd n o"><div class="ce r ap"><a href="https://towardsdatascience.com/?source=post_page-----2d454e5fd9a5----------------------" rel="noopener"><div class="cf cg r"><img alt="Towards Data Science" class="" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/1_5EUO1kUYBthpOCPzRj_l2g.png" width="97" height="36"></div></a></div><div class="ch r ci"><ul class="cj bh ck cl cm n cn g co cp cq"><li class="n o cr cs ct cu"><span class="as cx cy au cz da db"><a href="https://towardsdatascience.com/data-science/home?source=post_page-----2d454e5fd9a5----------------------" class="dc dd bb bc bd be bf bg bh bi de df bl bm dg dh" rel="noopener">Data Science</a></span></li><li class="n o cr cs ct cu"><span class="as cx cy au cz da db"><a href="https://towardsdatascience.com/machine-learning/home?source=post_page-----2d454e5fd9a5----------------------" class="dc dd bb bc bd be bf bg bh bi de df bl bm dg dh" rel="noopener">Machine Learning</a></span></li><li class="n o cr cs ct cu"><span class="as cx cy au cz da db"><a href="https://towardsdatascience.com/programming/home?source=post_page-----2d454e5fd9a5----------------------" class="dc dd bb bc bd be bf bg bh bi de df bl bm dg dh" rel="noopener">Programming</a></span></li><li class="n o cr cs ct cu"><span class="as cx cy au cz da db"><a href="https://towardsdatascience.com/data-visualization/home?source=post_page-----2d454e5fd9a5----------------------" class="dc dd bb bc bd be bf bg bh bi de df bl bm dg dh" rel="noopener">Visualization</a></span></li><li class="n o cr cs ct cu"><span class="as cx cy au cz da db"><a href="https://towardsdatascience.com/artificial-intelligence/home?source=post_page-----2d454e5fd9a5----------------------" class="dc dd bb bc bd be bf bg bh bi de df bl bm dg dh" rel="noopener">AI</a></span></li><li class="n o cr cs ct cu"><span class="as cx cy au cz da db"><a href="https://towardsdatascience.com/our-picks/home?source=post_page-----2d454e5fd9a5----------------------" class="dc dd bb bc bd be bf bg bh bi de df bl bm dg dh" rel="noopener">Picks</a></span></li><li class="n o cr cs ct cu"><span class="as cx cy au cz da db"><a href="https://towardsdatascience.com/more/home?source=post_page-----2d454e5fd9a5----------------------" class="dc dd bb bc bd be bf bg bh bi de df bl bm dg dh" rel="noopener">More</a></span></li><span class="cr cv cw"></span><li class="n o cr cs ct cu"><span class="as cx cy au cz da db"><a href="https://towardsdatascience.com/contribute/home?source=post_page-----2d454e5fd9a5----------------------" class="dc dd bb bc bd be bf bg bh bi de df bl bm dg dh" rel="noopener">Contribute</a></span></li></ul></div></div></div></div></div></div></nav><div class="di dj r dk dl"></div><article class="meteredContent"><section class="dm dn do dp ak dq bw n dr"></section><span class="r"></span><div><div class="ds u dt du dv dw"></div><section class="dx dy dz ea eb"><div class="n p"><div class="ac ae af ag ah ec aj ak"><div><div id="6633" class="ed ee ef at eg b eh ei ej ek el em en"><h1 class="eg b eh eo ef">Churn Prediction and Prevention in Python</h1></div></div><div id="8782" class="ep ee ax at as cx eq er es et eu ev ew"><h2 class="as cx ex ey ax">Using survival analysis to predict and prevent churn in Python with the lifelines package and the Cox Proportional Hazards Model.</h2></div><div class="ez"><div class="n fa fb fc fd"><div class="o n"><div><a href="https://towardsdatascience.com/@carldawson?source=post_page-----2d454e5fd9a5----------------------" rel="noopener"><img alt="Carl Dawson" class="r fe ff fg" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/1_KujqWHnANJii--WXthLB_w.jpeg" width="48" height="48"></a></div><div class="fh ak r"><div class="n"><div style="flex: 1 1 0%;"><span class="as b at au av aw r ef q"><div class="fi n o fj"><span class="as cx fk au cd fl fm fn fo fp ef"><a href="https://towardsdatascience.com/@carldawson?source=post_page-----2d454e5fd9a5----------------------" class="dc dd bb bc bd be bf bg bh bi fq bl bm fr fs" rel="noopener">Carl Dawson</a></span><div class="ft r ap h"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5&amp;source=-d08ce10ab60-------------------------follow_byline-" class="fu ef q bq fv fw fx fy bi fr fz ga gb gc gd ge bt as b at gf cy aw bu bv bw bx by bl" rel="noopener">Follow</a></div></div></span></div></div><span class="as b at au av aw r ax ay"><span class="as cx fk au cd fl fm fn fo fp ax"><div><a class="dc dd bb bc bd be bf bg bh bi fq bl bm fr fs" rel="noopener" href="https://towardsdatascience.com/churn-prediction-and-prevention-in-python-2d454e5fd9a5?source=post_page-----2d454e5fd9a5----------------------">Mar 7</a> · 14 min read<span style="padding-left: 4px;"><svg class="star-15px_svg__svgIcon-use" width="15" height="15" viewBox="0 0 15 15" style="margin-top: -2px;"><path d="M7.44 2.32c.03-.1.09-.1.12 0l1.2 3.53a.29.29 0 0 0 .26.2h3.88c.11 0 .13.04.04.1L9.8 8.33a.27.27 0 0 0-.1.29l1.2 3.53c.03.1-.01.13-.1.07l-3.14-2.18a.3.3 0 0 0-.32 0L4.2 12.22c-.1.06-.14.03-.1-.07l1.2-3.53a.27.27 0 0 0-.1-.3L2.06 6.16c-.1-.06-.07-.12.03-.12h3.89a.29.29 0 0 0 .26-.19l1.2-3.52z"></path></svg></span></div></span></span></div></div><div class="n gg gh gi gj gk gl gm gn ab"><div class="n o"><div class="go r ap"><a href="https://medium.com/p/2d454e5fd9a5/share/twitter?source=post_actions_header---------------------------" class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs" target="_blank" rel="noopener"><svg width="29" height="29" class="q"><path d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z"></path></svg></a></div><div class="go r ap"><a href="https://medium.com/p/2d454e5fd9a5/share/facebook?source=post_actions_header---------------------------" class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs" target="_blank" rel="noopener"><svg width="29" height="29" class="q"><path d="M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79"></path></svg></a></div><div class="gr r ao"><div><div class="bx"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5&amp;source=post_actions_header--------------------------bookmark_sidebar-" class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs" rel="noopener"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></a></div></div></div></div></div></div></div><p id="0f77" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Churn prediction is difficult. Before you can do anything to prevent customers leaving, you need to know everything from who’s going to leave and when, to how much it will impact your bottom line. In this post I’m going to explain some techniques for churn prediction and prevention using survival analysis.</p><h1 id="a6ac" class="hg hh ef at as hi hj hk hl hm hn ho hp hq hr hs ht" data-selectable-paragraph="">Will they, won’t they</h1><p id="054e" class="gs gt ef at gu b gv hu gx hv gz hw hb hx hd hy hf" data-selectable-paragraph="">The way many data analysts try to model this problem is by thinking in black-and-white terms: churn vs no-churn. It’s really easy to view the problem in this way as it’s a pattern we all know — supervised classification.</p><p id="19e8" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">But doing so leaves out a lot of the nuance of the churn prediction problem — the risk, the timelines, the cost of a customer leaving.</p><p id="efa2" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Nevertheless, let’s start with a classification model and see where we end up.</p><h1 id="59d5" class="hg hh ef at as hi hj hk hl hm hn ho hp hq hr hs ht" data-selectable-paragraph="">Our dataset</h1><p id="fdda" class="gs gt ef at gu b gv hu gx hv gz hw hb hx hd hy hf" data-selectable-paragraph="">The dataset we’ll be using is the Kaggle Telco Churn dataset (available <a href="https://www.kaggle.com/c/telco-churn/data" class="dc by hz ia ib ic" target="_blank" rel="noopener nofollow">here</a>), it contains a little over 7,000 customer records and includes features such as the customer’s monthly spend with the company, the length of time (in months) that they’ve been customers, and whether or not they have various internet service add-ons.</p><p id="8bf9" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Here’s the first 5 rows (please visit the <a href="https://machinelearningphd.com/churn-prediction-python/" class="dc by hz ia ib ic" target="_blank" rel="noopener nofollow">original article</a> for tables that aren’t just pictures):</p><figure class="ie if ig ih ii ij do dp paragraph-image"><div class="ik il im in ak"><div class="do dp id"><div class="it r im iu"><div class="iv r"><div class="io ip ds t u iq ak cd ir is"><img class="ds t u iq ak iw ix aq uw" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/1_cEuhsZhMe5nQSIbN58ihNA.png" width="1526" height="514" role="presentation"></div><img class="pr uv ds t u iq ak iz" width="1526" height="514" role="presentation" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/1_cEuhsZhMe5nQSIbN58ihNA(1).png"><noscript></noscript></div></div></div></div></figure><p id="75f6" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">The first thing you’ll notice is that there are a lot of categorical variables rendered as text values (‘Yes’,’No’,etc.) in the columns, let’s use <code class="iu ja jb jc jd b">pd.get_dummies</code> to fix those:</p><pre class="ie if ig ih ii je jf cm"><span id="07b2" class="jg hh ef at jd b fk jh ji r jj" data-selectable-paragraph="">dummies = pd.get_dummies(<br>    data[[ 'gender', 'SeniorCitizen', 'Partner', 'Dependents', 'tenure', 'PhoneService', 'MultipleLines', 'InternetService', 'OnlineSecurity', 'OnlineBackup', 'DeviceProtection', 'TechSupport', 'StreamingTV', 'StreamingMovies', 'Contract', 'PaperlessBilling', 'PaymentMethod', 'Churn' ]]<br>) <br>data = dummies.join(data[['MonthlyCharges', 'TotalCharges']])</span></pre><p id="e87e" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">If you’re following along, you’ll also have to fix some missing values in the TotalCharges column which has made the whole column text instead of numeric:</p><pre class="ie if ig ih ii je jf cm"><span id="4615" class="jg hh ef at jd b fk jh ji r jj" data-selectable-paragraph="">data['TotalCharges'] = data[['TotalCharges']].replace([' '], '0') data['TotalCharges'] = pd.to_numeric(data['TotalCharges'])</span></pre><p id="e9bd" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Now we have our data in a useable format, let’s visualise it a little:</p><pre class="ie if ig ih ii je jf cm"><span id="f88d" class="jg hh ef at jd b fk jh ji r jj" data-selectable-paragraph="">from matplotlib import pyplot as plt <br>plt.scatter( data['tenure'], data['MonthlyCharges'], c=data['Churn_Yes']) <br>plt.xlabel('Customer Tenure (Months)') <br>plt.ylabel('Monthly Charges')</span></pre><figure class="ie if ig ih ii ij do dp paragraph-image"><div class="ik il im in ak"><div class="do dp jk"><div class="it r im iu"><div class="jl r"><div class="io ip ds t u iq ak cd ir is"><img class="ds t u iq ak iw ix aq uw" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/0_CHF7g5Tqt6580WQh.png" width="806" height="534" role="presentation"></div><img class="pr uv ds t u iq ak iz" width="806" height="534" role="presentation" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/0_CHF7g5Tqt6580WQh(1).png"><noscript></noscript></div></div></div></div></figure><p id="3f5f" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">It’s hard to draw any conclusions from this visualisation which compares the customer’s tenure (the thing we’re trying to improve) with their monthly charges. Let’s move on to training a Logistic Regression model to see if we can use these dummy features to predict churn.</p><h1 id="c7e2" class="hg hh ef at as hi hj hk hl hm hn ho hp hq hr hs ht" data-selectable-paragraph="">Logistic Regression</h1><pre class="ie if ig ih ii je jf cm"><span id="a5c7" class="jg hh ef at jd b fk jh ji r jj" data-selectable-paragraph="">from sklearn.linear_model import LogisticRegression <br>from sklearn.model_selection import train_test_split <br>from sklearn.metrics import confusion_matrix, accuracy_score </span><span id="0dc1" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">X_train, X_test, y_train, y_test = train_test_split(data[x_select], data['Churn_Yes']) </span><span id="0287" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">clf = LogisticRegression(solver='lbfgs', max_iter=1000) clf.fit(X_train, y_train)</span></pre><p id="f24f" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">If we train a model without doing any rebalancing of the classes or weighting of the samples, we can achieve an accuracy of 79.9%. That’s not bad for a first attempt.</p><p id="7a09" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Here’s the confusion matrix for the Logistic Regression model:</p><figure class="ie if ig ih ii ij do dp paragraph-image"><div class="do dp jr"><div class="it r im iu"><div class="js r"><div class="io ip ds t u iq ak cd ir is"><img class="ds t u iq ak iw ix aq uw" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/0_9sKudQjwv3dVyt3w.png" width="646" height="560" role="presentation"></div><img class="pr uv ds t u iq ak iz" width="646" height="560" role="presentation" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/0_9sKudQjwv3dVyt3w(1).png"><noscript></noscript></div></div></div></figure><p id="6b82" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">What you can see here is that while the overall accuracy is fairly high, the model only identifies the customers who will leave 55% of the time, much closer to random than we’d like.</p><h1 id="0daa" class="hg hh ef at as hi hj hk hl hm hn ho hp hq hr hs ht" data-selectable-paragraph="">What’s our goal?</h1><p id="a9dc" class="gs gt ef at gu b gv hu gx hv gz hw hb hx hd hy hf" data-selectable-paragraph="">This is the point in the process where most data scientists (myself included) would double down on trying to improve the accuracy of the model by engineering new features, trying different algorithms, balancing the dataset and so on. But it’s good to stop and ask yourself what your end goal is.</p><p id="d2d1" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">It would be great to know every single customer who will churn, but how much insight would that information really bring? And how would you know what to focus on if you wanted to keep them and how much you could spend to keep them before having them as a customer turned into a loss?</p><p id="2aec" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Let’s try taking a different perspective.</p><h1 id="b646" class="hg hh ef at as hi hj hk hl hm hn ho hp hq hr hs ht" data-selectable-paragraph="">Survival Analysis</h1><p id="2be4" class="gs gt ef at gu b gv hu gx hv gz hw hb hx hd hy hf" data-selectable-paragraph="">What Logistic Regression is doing (under the hood) is assigning a probability to each observation that describes how likely it is to belong to the positive class.</p><p id="f2f0" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">In the case of churn vs no-churn, and any kind of classification, this can seem like a minor annoyance that we have to overcome by selecting a cutoff and rounding the output (&lt;0.5 means 0, &gt;=0.5 means 1). However, if you think about it, this probability is exactly what we want.</p><p id="00a8" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">In any large enough group of customers there are going to be people who have the same attributes / features (that’s the pigeon hole principle at work). Some of those will churn and some of them won’t, and what you’d ideally like to know is the probability of churn for each group. This is what Logistic Regression gives you (before you cutoff and round), but using Logistic Regression in this scenario does have one problem — it’s not clear what time scale it’s predicting for. Enter Survival Analysis.</p><p id="39a3" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Survival Analysis is a set of methods used in the life sciences (mostly Epidemiology and Pharma research) to determine the probability of patient cohort survival over time. It’s a very large body of work with a great many intricate and statistically sophisticated tools, but we’ll only be using one of them — The Cox Proportional Hazards Model.</p><h1 id="f059" class="hg hh ef at as hi hj hk hl hm hn ho hp hq hr hs ht" data-selectable-paragraph="">The Cox Proportional Hazards Model</h1><p id="c012" class="gs gt ef at gu b gv hu gx hv gz hw hb hx hd hy hf" data-selectable-paragraph="">The Cox PH Model is a regression based model that analyses the covariates (features) of a dataset with regards to how long a patient (or customer) survives. It is called the Proportional Hazards model as it describes how each feature proportionally increases risk over the baseline survival rate for a cohort.</p><p id="d311" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Thanks to the very good and well-documented <code class="iu ja jb jc jd b">lifelines</code> package in Python, it is simple to get started using the Cox PH model.</p><h1 id="87a1" class="hg hh ef at as hi hj hk hl hm hn ho hp hq hr hs ht" data-selectable-paragraph="">Applying the CoxPH Model</h1><p id="ed81" class="gs gt ef at gu b gv hu gx hv gz hw hb hx hd hy hf" data-selectable-paragraph="">In most cases, the first thing you’d have to do to your dataset to get it ready for the Cox regression model is create two new features:</p><ol class=""><li id="d7f5" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf jt ju jv" data-selectable-paragraph="">The ‘age’ of an observation (the difference in time between a patient starting a course of medication and the most recent observation of their status, or in our case the time between a customer joining a service and the most recent observation of whether or not they have churned)</li><li id="cc5e" class="gs gt ef at gu b gv jw gx jx gz jy hb jz hd ka hf jt ju jv" data-selectable-paragraph="">The ‘event’ flag (a binary flag representing if an event had occurred, such as death or churn)</li></ol><p id="248f" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Luckily for us, the telco dataset has both of these features already engineered in the <code class="iu ja jb jc jd b">tenure</code> and <code class="iu ja jb jc jd b">Churn</code> columns.</p><p id="ec5e" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">An important thing to note when it comes to doing any kind of matrix-based regression is that Singular Matrices will throw an error in Python (as they should). All this means is that when you create dummy variables, you must throw one of the columns away. (Don’t worry, we’ll still be able to infer the missing category from the remaining variables.)</p><p id="aa9b" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Here’s the first 5 rows of our dummied and reduced dataset:</p><figure class="ie if ig ih ii ij do dp paragraph-image"><div class="ik il im in ak"><div class="do dp id"><div class="it r im iu"><div class="iv r"><div class="io ip ds t u iq ak cd ir is"><img class="ds t u iq ak iw ix aq uw" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/1_LrE6qbfzpmTeVo7x1gDY5Q.png" width="1526" height="514" role="presentation"></div><img class="pr uv ds t u iq ak iz" width="1526" height="514" role="presentation" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/1_LrE6qbfzpmTeVo7x1gDY5Q(1).png"><noscript></noscript></div></div></div></div></figure><p id="d82d" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">You can see the Gender_Male has disappeared, as has Partner_No, Dependents_No and so on.</p><p id="98aa" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Now that we have our dataset in the right format, let’s fit the Cox model:</p><pre class="ie if ig ih ii je jf cm"><span id="d4ac" class="jg hh ef at jd b fk jh ji r jj" data-selectable-paragraph="">from lifelines import CoxPHFitter </span><span id="151f" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">cph_train, cph_test = train_test_split(data[x_select], test_size=0.2) <br>cph.fit(cph_train, 'tenure', 'Churn_Yes')</span></pre><p id="f385" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">There are a few unique things about the <code class="iu ja jb jc jd b">lifelines</code> package which can trip up frequent users of Scikit-Learn, the first is that the column that contains the event observations (churn), needs to be in the single dataset that’s passed to the fit call. As such, we can’t split our dataset into four pieces (train and test for X and y) as we would in Logistic Regression, we’ll have to split it in two. For anyone who’s curious, this is very similar to the R syntax, where you specify the relevant columns within a single dataset and the algorithm takes care of removing them from the training data.</p><p id="c521" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">In the <code class="iu ja jb jc jd b">cph.fit</code> call, you have to pass in three different arguments. The first is the dataset that we’ve created using <code class="iu ja jb jc jd b">train_test_split</code>, the second is the ‘age’ column (in our case tenure) and the third is the ‘event’ column (Churn_Yes in our case).</p><p id="9559" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">The next unique thing about the <code class="iu ja jb jc jd b">lifelines</code> package is the <code class="iu ja jb jc jd b">.print_summary</code> method that can be used on models (another thing borrowed from R).</p><p id="2094" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Here’s our model summary:</p><figure class="ie if ig ih ii ij do dp paragraph-image"><div class="ik il im in ak"><div class="do dp kb"><div class="it r im iu"><div class="kc r"><div class="io ip ds t u iq ak cd ir is"><img class="ds t u iq ak iw ix aq uw" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/1_9nsFl1lf3Ez-fxl9lWshhQ.png" width="1508" height="1506" role="presentation"></div><img class="pr uv ds t u iq ak iz" width="1508" height="1506" role="presentation" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/1_9nsFl1lf3Ez-fxl9lWshhQ(1).png"><noscript></noscript></div></div></div></div></figure><p id="0c38" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">There are a few important things to notice about this output.</p><ol class=""><li id="45c7" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf jt ju jv" data-selectable-paragraph="">We can see the number of observations listed as n=5634 right at the top of the output, next to that we have our number of events (churned customers).</li><li id="3ea5" class="gs gt ef at gu b gv jw gx jx gz jy hb jz hd ka hf jt ju jv" data-selectable-paragraph="">We get the coefficients of our model. These are very important and they tell us how each feature <em class="kd">increases</em> risk, so if it’s a positive number that attribute makes a customer more likely to churn, and if it is negative then customers with that feature are less likely to churn.</li><li id="9998" class="gs gt ef at gu b gv jw gx jx gz jy hb jz hd ka hf jt ju jv" data-selectable-paragraph="">We get significance codes for our features. A very nice addition!</li><li id="6b65" class="gs gt ef at gu b gv jw gx jx gz jy hb jz hd ka hf jt ju jv" data-selectable-paragraph="">We get the concordance.</li></ol><h1 id="b1d0" class="hg hh ef at as hi hj hk hl hm hn ho hp hq hr hs ht" data-selectable-paragraph="">Concordance</h1><p id="1cb9" class="gs gt ef at gu b gv hu gx hv gz hw hb hx hd hy hf" data-selectable-paragraph="">Similar to how you compare Logistic Regression models using accuracy, you can compare between different Cox PH models using the concordance.</p><p id="4b18" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Simply put, concordance is an assessment of how internally consistent the model is — if it says a particular feature increases risk, the observations that have that feature should be more at risk. If they are the concordance goes up, if they’re not then it decreases.</p><p id="57c9" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Our model has a concordance of .929 out of 1, so it’s a very good Cox model.</p><h1 id="6bf6" class="hg hh ef at as hi hj hk hl hm hn ho hp hq hr hs ht" data-selectable-paragraph="">Plotting the Cox model</h1><p id="3d85" class="gs gt ef at gu b gv hu gx hv gz hw hb hx hd hy hf" data-selectable-paragraph="">Calling the basic <code class="iu ja jb jc jd b">.plot</code> function on the model gives us this:</p><figure class="ie if ig ih ii ij do dp paragraph-image"><div class="ik il im in ak"><div class="do dp ke"><div class="it r im iu"><div class="kf r"><div class="io ip ds t u iq ak cd ir is"><img class="ds t u iq ak iw ix aq uw" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/0_pkwp93jPDVFm4Tp7.png" width="1190" height="534" role="presentation"></div><img class="pr uv ds t u iq ak iz" width="1190" height="534" role="presentation" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/0_pkwp93jPDVFm4Tp7(1).png"><noscript></noscript></div></div></div></div></figure><p id="0cf4" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">A handy visualisation of the significance and risk effects of the various features.</p><p id="4fed" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Something else we can do at this point is investigate how the features impact survival over time, like this:</p><pre class="ie if ig ih ii je jf cm"><span id="9851" class="jg hh ef at jd b fk jh ji r jj" data-selectable-paragraph="">cph.plot_covariate_groups('TotalCharges', groups=[0,4000])</span></pre><p id="1bba" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph=""><code class="iu ja jb jc jd b">.plot_covariate_groups</code> is a method from the <code class="iu ja jb jc jd b">lifelines</code> package which takes a feature name as its first input and a range of groupings for its second. So here we’ll be looking at the different survival curves for customers whose TotalCharges are near zero compared to those whose TotalCharges are closer to 4000. Which looks like this:</p><figure class="ie if ig ih ii ij do dp paragraph-image"><div class="ik il im in ak"><div class="do dp kg"><div class="it r im iu"><div class="kh r"><div class="io ip ds t u iq ak cd ir is"><img class="ds t u iq ak iw ix aq uw" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/0_1kNyFd_9V1fbiJIf.png" width="774" height="536" role="presentation"></div><img class="pr uv ds t u iq ak iz" width="774" height="536" role="presentation" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/0_1kNyFd_9V1fbiJIf(1).png"><noscript></noscript></div></div></div></div></figure><p id="1918" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">You can see that customer whose TotalSpend is closer to zero are at a much higher risk for churning (their survival curve drops off) than those whose TotalSpend is closer to 4000.</p><h1 id="b3a6" class="hg hh ef at as hi hj hk hl hm hn ho hp hq hr hs ht" data-selectable-paragraph="">Churn Prediction</h1><p id="2012" class="gs gt ef at gu b gv hu gx hv gz hw hb hx hd hy hf" data-selectable-paragraph="">We have a good, working model, now what?</p><p id="2e96" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">The point of this exercise was to get some usable information to help us make decisions about how to intervene to reduce and prevent churn. So let’s make some predictions.</p><p id="ffbf" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Unfortunately, there’s not much we can do for the customers who have already left, so let’s select only the remaining customers from our dataset:</p><pre class="ie if ig ih ii je jf cm"><span id="df55" class="jg hh ef at jd b fk jh ji r jj" data-selectable-paragraph="">censored_subjects = data.loc[data['Churn_Yes'] == 0]</span></pre><p id="b3f6" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">In Survival Analysis lingo a censored observation is one which is yet to have an ‘event’, so we’re selecting all those customer who have yet to churn.</p><p id="ad0a" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Now to predict their survival curves we use the handy method <code class="iu ja jb jc jd b">.predict_survival_function</code> like so:</p><pre class="ie if ig ih ii je jf cm"><span id="7434" class="jg hh ef at jd b fk jh ji r jj" data-selectable-paragraph="">unconditioned_sf = cph.predict_survival_function(censored_subjects)</span></pre><p id="a5bd" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">You can see that we’ve called these ‘unconditioned’ survival functions, that’s because we know that some of these curves will predict churn before the customer’s current tenure time. We have to condition the predictions on the basis that we know the customers were still with us when the data was collected:</p><pre class="ie if ig ih ii je jf cm"><span id="b774" class="jg hh ef at jd b fk jh ji r jj" data-selectable-paragraph="">conditioned_sf = unconditioned_sf.apply(lambda c: (c / c.loc[data.loc[c.name, 'tenure']]).clip_upper(1))</span></pre><p id="ea93" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Now we can investigate individual customers and see how the conditioning has affected their survival over the baseline rate:</p><pre class="ie if ig ih ii je jf cm"><span id="6121" class="jg hh ef at jd b fk jh ji r jj" data-selectable-paragraph="">subject = 12 <br>unconditioned_sf[subject].plot(ls="--", color="#A60628", label="unconditioned") <br>conditioned_sf[subject].plot(color="#A60628", label="conditioned on $T&gt;58$") plt.legend()</span></pre><figure class="ie if ig ih ii ij do dp paragraph-image"><div class="ik il im in ak"><div class="do dp ki"><div class="it r im iu"><div class="kj r"><div class="io ip ds t u iq ak cd ir is"><img class="ds t u iq ak iw ix aq uw" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/0_xOi6bk-oQsl5DU1-.png" width="788" height="532" role="presentation"></div><img class="pr uv ds t u iq ak iz" width="788" height="532" role="presentation" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/0_xOi6bk-oQsl5DU1-(1).png"><noscript></noscript></div></div></div></div></figure><p id="cdba" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">As you can see, the fact that we know customer 12 is still a customer after 58 months means his survival curve drops slower than the baseline one for customers similar to him without that condition.</p><p id="0c49" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">That very handy <code class="iu ja jb jc jd b">predict_survival_function</code> method has created a matrix containing a survival probability for each remaining customer at each point in time. What we need to do next is use that to select a single number as a prediction for how long the customer will last, which we can use to determine intervention value.</p><p id="e8ed" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Depending on the use case you could choose any percentile, but for our case we’ll use the median.</p><pre class="ie if ig ih ii je jf cm"><span id="1000" class="jg hh ef at jd b fk jh ji r jj" data-selectable-paragraph="">from lifelines.utils import median_survival_times, qth_survival_times </span><span id="4911" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">predictions_50 = median_survival_times(conditioned_sf) <br># This is the same, but you can change the fraction to get other <br># %tiles.  <br># predictions_50 = qth_survival_times(.50, conditioned_sf)</span></pre><p id="8126" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">What that gives us is a single row (in a pandas DataFrame) that has the month number (tenure) where the customer has a 50% likelihood of churning.</p><p id="2da0" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">We can use this single row and by joining it to our data DataFrame can investigate the predicted remaining value a customer has for the business:</p><pre class="ie if ig ih ii je jf cm"><span id="a962" class="jg hh ef at jd b fk jh ji r jj" data-selectable-paragraph="">values = predictions_50.T.join(data[['MonthlyCharges','tenure']]) values['RemainingValue'] = values['MonthlyCharges'] * (values[0.5] - values['tenure'])</span></pre><p id="cea2" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Here’s the first 5 rows of this new DataFrame:</p><figure class="ie if ig ih ii ij do dp paragraph-image"><div class="ik il im in ak"><div class="do dp kk"><div class="it r im iu"><div class="kl r"><div class="io ip ds t u iq ak cd ir is"><img class="ds t u iq ak iw ix aq uw" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/1_B_vhXE7p-G-hAq4r6RObvQ.png" width="1186" height="518" role="presentation"></div><img class="pr uv ds t u iq ak iz" width="1186" height="518" role="presentation" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/1_B_vhXE7p-G-hAq4r6RObvQ(1).png"><noscript></noscript></div></div></div></div></figure><p id="d46e" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">The column named 0.5 is the single row we received from our <code class="iu ja jb jc jd b">median_survival_times</code> call. If you selected a different percentile, this column would be named differently.</p><p id="0445" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">What we see here is that by multiplying the MonthlyCharges by the difference between the customer’s current tenure and their median cancellation date, we can get a sense for which customers would inflict the most damage to our top line.</p><h1 id="bce1" class="hg hh ef at as hi hj hk hl hm hn ho hp hq hr hs ht" data-selectable-paragraph="">Churn Prevention</h1><p id="19f1" class="gs gt ef at gu b gv hu gx hv gz hw hb hx hd hy hf" data-selectable-paragraph="">Okay, so now we know which customers are the highest risk for churn, but what can we do to keep them?</p><p id="e728" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">If we go back to our coefficient chart from earlier we can see that the most significant features which impact survival positively are:</p><ol class=""><li id="f92c" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf jt ju jv" data-selectable-paragraph="">Having a 2 year contract</li><li id="afa5" class="gs gt ef at gu b gv jw gx jx gz jy hb jz hd ka hf jt ju jv" data-selectable-paragraph="">Having a 1 year contract</li><li id="3c9f" class="gs gt ef at gu b gv jw gx jx gz jy hb jz hd ka hf jt ju jv" data-selectable-paragraph="">Paying by Credit Card</li><li id="3e05" class="gs gt ef at gu b gv jw gx jx gz jy hb jz hd ka hf jt ju jv" data-selectable-paragraph="">Paying by Bank Transfer</li></ol><p id="88d0" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Beyond these four the increases in survival become minimal and the results aren’t significant anyway. So let’s focus on these four.</p><p id="600e" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">What we need to do to understand how much we can spend to keep customers is compare their survival rates with customer similar to them who instead have each of these four features present:</p><pre class="ie if ig ih ii je jf cm"><span id="6ee3" class="jg hh ef at jd b fk jh ji r jj" data-selectable-paragraph="">upgrades = ['PaymentMethod_Credit card (automatic)', 'PaymentMethod_Bank transfer (automatic)', 'Contract_One year', 'Contract_Two year'] </span><span id="3f7f" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">results_dict = {} </span><span id="4dc8" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">for customer in values.index: <br>    actual = data.loc[[customer]] change = data.loc[[customer]]     <br>    results_dict[customer] = [cph.predict_median(actual)] <br>    for upgrade in upgrades: <br>        change[upgrade] = 1 if list(change[upgrade]) == [0] else 0    <br>        results_dict[customer].append(cph.predict_median(change))      <br>        change[upgrade] = 1 if list(change[upgrade]) == [0] else 0  </span><span id="ad07" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">results_df = pd.DataFrame(results_dict).T <br>results_df.columns = ['baseline'] + upgrades actions = values.join(results_df).drop([0.5], axis=1)</span></pre><p id="fc22" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">What we’re doing here is looping through the customers, changing one feature at a time and storing the predicted median survival for a customer who has that change. What we’re left with at the end is this:</p><figure class="ie if ig ih ii ij do dp paragraph-image"><div class="ik il im in ak"><div class="do dp id"><div class="it r im iu"><div class="km r"><div class="io ip ds t u iq ak cd ir is"><img class="ds t u iq ak iw ix aq uw" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/1_Qw5Z677eaXSKWAOj9w_h-g.png" width="1526" height="520" role="presentation"></div><img class="pr uv ds t u iq ak iz" width="1526" height="520" role="presentation" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/1_Qw5Z677eaXSKWAOj9w_h-g(1).png"><noscript></noscript></div></div></div></div></figure><p id="ac83" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">We can see from this that if we managed to get the first customer to use a Credit Card to make payments that we could increase the survival time by 4 months (25–21 baseline) and so on.</p><p id="3ec5" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">This is a great result which really helps us to see how we can move the needle on keeping customers, but let’s go a step further and see what impact that has financially:</p><pre class="ie if ig ih ii je jf cm"><span id="e214" class="jg hh ef at jd b fk jh ji r jj" data-selectable-paragraph="">actions['CreditCard Diff'] = ( <br>    actions['PaymentMethod_Credit card (automatic)'] -     <br>    actions['baseline']<br>) * actions['MonthlyCharges'] </span><span id="780e" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">actions['BankTransfer Diff'] = ( <br>    actions['PaymentMethod_Bank transfer (automatic)'] - <br>    actions['baseline']<br>) * actions['MonthlyCharges'] </span><span id="1515" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">actions['1yrContract Diff'] = ( <br>    actions['Contract_One year'] - actions['baseline']<br>) * actions['MonthlyCharges'] </span><span id="cacb" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">actions['2yrContract Diff'] = ( <br>    actions['Contract_Two year'] - actions['baseline']<br>) * actions['MonthlyCharges']</span></pre><figure class="ie if ig ih ii ij do dp paragraph-image"><div class="ik il im in ak"><div class="do dp kn"><div class="it r im iu"><div class="ko r"><div class="io ip ds t u iq ak cd ir is"><img class="ds t u iq ak iw ix aq uw" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/1_-LmwKkjGi7yYahK06c9cZg.png" width="1514" height="516" role="presentation"></div><img class="pr uv ds t u iq ak iz" width="1514" height="516" role="presentation" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/1_-LmwKkjGi7yYahK06c9cZg(1).png"><noscript></noscript></div></div></div></div></figure><p id="af33" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Now we can see that moving the customer in the first row to paying by Credit Card could be worth up to £119.40. That’s much more helpful than a simple count of months.</p><h1 id="f955" class="hg hh ef at as hi hj hk hl hm hn ho hp hq hr hs ht" data-selectable-paragraph="">Accuracy and Calibration</h1><p id="d276" class="gs gt ef at gu b gv hu gx hv gz hw hb hx hd hy hf" data-selectable-paragraph="">Okay, we’re nearly done. We have monetary values that we can use to judge whether a particular churn intervention is feasible as well as solid predictions regarding <em class="kd">when</em> a customer will churn. But how accurate is all of this?</p><p id="27b3" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">We know our Cox model is a good one (92.9% concordance), but what does that mean in real terms? How accurate is it?</p><p id="e6e6" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">When you take a probabilistic view of events like churn (or fraud or theft) it’s important to check for calibration more so than accuracy. Calibration is the propensity of a model to get probabilities right over time.</p><p id="4484" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Think of it like this, a weather forecasting service is well calibrated if out of all the times it said there was a 40% chance of rain, it actually rained 40% of the time.</p><p id="70b1" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">In Scikit-Learn, we can use the <code class="iu ja jb jc jd b">calibration_curve</code> method to derive values from probabilistic predictions and the true values (binary) of our dataset:</p><pre class="ie if ig ih ii je jf cm"><span id="f660" class="jg hh ef at jd b fk jh ji r jj" data-selectable-paragraph="">from sklearn.calibration import calibration_curve </span><span id="1e11" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">plt.figure(figsize=(10, 10))<br> <br>ax1 = plt.subplot2grid((3, 1), (0, 0), rowspan=2) <br>ax1.plot([0, 1], [0, 1], "k:", label="Perfectly calibrated") </span><span id="1951" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">probs = 1-np.array(cph.predict_survival_function(cph_test).loc[13])</span><span id="7119" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">actual = cph_test['Churn_Yes'] </span><span id="d948" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">fraction_of_positives, mean_predicted_value = \ calibration_curve(actual, probs, n_bins=10, normalize=False) </span><span id="1f4b" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">ax1.plot(mean_predicted_value, fraction_of_positives, "s-", label="%s" % ("CoxPH",)) </span><span id="bf5a" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">ax1.set_ylabel("Fraction of positives") <br>ax1.set_ylim([-0.05, 1.05]) ax1.legend(loc="lower right") ax1.set_title('Calibration plots (reliability curve)')</span></pre><p id="9cb7" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Which gives us this:</p><figure class="ie if ig ih ii ij do dp paragraph-image"><div class="ik il im in ak"><div class="do dp kp"><div class="it r im iu"><div class="kq r"><div class="io ip ds t u iq ak cd ir is"><img class="ds t u iq ak iw ix aq uw" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/0_LKv63UWICKPwp2w1.png" width="1226" height="786" role="presentation"></div><img class="pr uv ds t u iq ak iz" width="1226" height="786" role="presentation" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/0_LKv63UWICKPwp2w1(1).png"><noscript></noscript></div></div></div></div></figure><p id="fb46" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">You read this chart by examining the various probabilities against the fractions that are present in the dataset (in our case the test set).</p><p id="2158" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">You can see that it’s pretty close the diagonal line which represents perfect calibration. However, our model seems to underpredict risk at the low end (&lt; 50% chance of churn) and slightly overpredict risk at the high end (&gt; 50% chance of churn)</p><p id="b6bd" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">To get a numeric understanding of how far away the line is from perfect calibration, we can use the <code class="iu ja jb jc jd b">brier_score_loss</code> from the Scikit-Learn package:</p><pre class="ie if ig ih ii je jf cm"><span id="39e2" class="jg hh ef at jd b fk jh ji r jj" data-selectable-paragraph="">brier_score_loss( <br>    cph_test['Churn_Yes'], 1 - <br>    np.array(cph.predict_survival_function(cph_test).loc[13]), pos_label=1 <br>)</span></pre><p id="7516" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Those of you with a keen eye may have noticed that I keep indexing at tenure = 13. Because our model works over a range of time periods, we have to inspect the calibration at each step in order to get a feel for accuracy. Let’s do that all in one go:</p><pre class="ie if ig ih ii je jf cm"><span id="0c22" class="jg hh ef at jd b fk jh ji r jj" data-selectable-paragraph="">loss_dict = {} <br>for i in range(1,73): <br>    score = brier_score_loss( <br>        cph_test['Churn_Yes'], 1 -    <br>        np.array(cph.predict_survival_function(cph_test).loc[i]),   <br>        pos_label=1 ) <br>    loss_dict[i] = [score] </span><span id="6875" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">loss_df = pd.DataFrame(loss_dict).T </span><span id="c76c" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">fig, ax = plt.subplots() <br>ax.plot(loss_df.index, loss_df) <br>ax.set(xlabel='Prediction Time', ylabel='Calibration Loss', title='Cox PH Model Calibration Loss / Time') <br>ax.grid() </span><span id="4bcd" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">plt.show()</span></pre><p id="9845" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Which gives us this:</p><figure class="ie if ig ih ii ij do dp paragraph-image"><div class="ik il im in ak"><div class="do dp kr"><div class="it r im iu"><div class="ks r"><div class="io ip ds t u iq ak cd ir is"><img class="ds t u iq ak iw ix aq uw" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/0_ZiC8xlvmwcgASj92.png" width="784" height="548" role="presentation"></div><img class="pr uv ds t u iq ak iz" width="784" height="548" role="presentation" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/0_ZiC8xlvmwcgASj92(1).png"><noscript></noscript></div></div></div></div></figure><p id="fea8" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">So we can see that our model is pretty well calibrated between 5 and 25 months and then proceeds to get less and less so as we start to predict further out.</p><p id="9f2f" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">The only remaining thing to do to make our analysis more realistic is account for this poor calibration.</p><p id="22fc" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Let’s create upper and lower bounds for the expected return on investment from getting customers to make changes:</p><pre class="ie if ig ih ii je jf cm"><span id="d518" class="jg hh ef at jd b fk jh ji r jj" data-selectable-paragraph="">loss_df.columns = ['loss'] <br>temp_df = actions.reset_index().set_index('PaymentMethod_Credit card (automatic)').join(loss_df) <br>temp_df = temp_df.set_index('index') <br>actions['CreditCard Lower'] = temp_df['CreditCard Diff'] - (temp_df['loss'] * temp_df['CreditCard Diff']) <br>actions['CreditCard Upper'] = temp_df['CreditCard Diff'] + (temp_df['loss'] * temp_df['CreditCard Diff']) </span><span id="8864" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">temp_df = actions.reset_index().set_index('PaymentMethod_Bank transfer (automatic)').join(loss_df) <br>temp_df = temp_df.set_index('index') <br>actions['BankTransfer Lower'] = temp_df['BankTransfer Diff'] - (.5 * temp_df['loss'] * temp_df['BankTransfer Diff']) actions['BankTransfer Upper'] = temp_df['BankTransfer Diff'] + (.5 * temp_df['loss'] * temp_df['BankTransfer Diff']) </span><span id="1dd7" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">temp_df = actions.reset_index().set_index('Contract_One year').join(loss_df) <br>temp_df = temp_df.set_index('index') <br>actions['1yrContract Lower'] = temp_df['1yrContract Diff'] - (.5 * temp_df['loss'] * temp_df['1yrContract Diff']) actions['1yrContract Upper'] = temp_df['1yrContract Diff'] + (.5 * temp_df['loss'] * temp_df['1yrContract Diff']) </span><span id="4912" class="jg hh ef at jd b fk jm jn jo jp jq ji r jj" data-selectable-paragraph="">temp_df = actions.reset_index().set_index('Contract_Two year').join(loss_df) <br>temp_df = temp_df.set_index('index') <br>actions['2yrContract Lower'] = temp_df['2yrContract Diff'] - (.5 * temp_df['loss'] * temp_df['2yrContract Diff']) actions['2yrContract Upper'] = temp_df['2yrContract Diff'] + (.5 * temp_df['loss'] * temp_df['2yrContract Diff'])</span></pre><p id="91be" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Here I’m discounting the value we came up with before to account for the uncertainty with regards to calibration. We look up how well calibrated the model is for each time period we predict that a specific upgrade will produce and create a lower and upper bound around the estimated return on investment.</p><p id="cd8d" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">That gives us something like this:</p><figure class="ie if ig ih ii ij do dp paragraph-image"><div class="ik il im in ak"><div class="do dp kt"><div class="it r im iu"><div class="ku r"><div class="io ip ds t u iq ak cd ir is"><img class="ds t u iq ak iw ix aq uw" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/1_07AkTrjkTh6sbpCwQGWp0w.png" width="1266" height="502" role="presentation"></div><img class="pr uv ds t u iq ak iz" width="1266" height="502" role="presentation" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/1_07AkTrjkTh6sbpCwQGWp0w(1).png"><noscript></noscript></div></div></div></div></figure><p id="a658" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">With that we’ve ended our whirlwind tour of Survival Analysis, Concordance and Calibration. What we’ve got for our efforts is an actionable set of data that we can use to keep customers signed up for longer — which is the point of churn prediction!</p><p id="c121" class="gs gt ef at gu b gv gw gx gy gz ha hb hc hd he hf" data-selectable-paragraph="">Thank you for reading!</p><div class="kv kw kx ky kz la"><a href="https://mlroadmap.com/?source=post_page-----2d454e5fd9a5----------------------" rel="noopener nofollow"><section class="ld do dp ak bw n ap le lf lg lh li lj lk ll lm ln lo lp lq lr ls"><div class="lt n dr p lu lv"><h2 class="as hi lw au ef"><div class="cd lb fm fn lc fp">The Machine Learning Roadmap</div></h2><div class="lx r"><h3 class="as cx fk au ax"><div class="cd lb fm fn lc fp">Book a call with an experienced machine learning and data science consultant …</div></h3></div><div class="ly r"><h4 class="as cx cy au ax"><div class="cd lb fm fn lc fp">mlroadmap.com</div></h4></div></div><div class="lz r"><div class="sd r mb mc md lz me mf mg"></div></div></section></a></div></div></div></section></div></article><div class="pr dw mh s ak mi mj mk" data-test-id="post-sidebar"><div class="n p"><div class="ac ae af ag ah ai aj ak"><div class="ml n dr"><div class="uz"><div class="mm mn r"><a href="https://towardsdatascience.com/?source=post_sidebar--------------------------post_sidebar-" class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs" rel="noopener"><h2 class="as hi lw au ef">Towards Data Science</h2></a><div class="mo mp r"><h4 class="as cx fk au cd mq fm fn mr fp ax">Sharing concepts, ideas, and codes.</h4></div><div class="bx"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5&amp;source=post_sidebar--------------------------follow_sidebar-" class="ms bq az ba br bj bk bs bi bt as b at au av aw bu bv bw bx by bl" rel="noopener">Follow</a></div></div><div class="mt mu mv n"><div class="n o"><div class="mw r im"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5&amp;source=post_sidebar-----2d454e5fd9a5---------------------clap_sidebar-" class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs" rel="noopener"><div class="bg mx my mz na nb nc se ba ne bk"><svg width="29" height="29"><g fill-rule="evenodd"><path d="M13.74 1l.76 2.97.76-2.97zM16.82 4.78l1.84-2.56-1.43-.47zM10.38 2.22l1.84 2.56-.41-3.03zM22.38 22.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M9.1 22.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L6.1 15.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L6.4 11.26l-1.18-1.18a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L11.96 14a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L8.43 9.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L20.63 15c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM13 6.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 23 23.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z"></path></g></svg></div></a></div><div class="nf r"><div class="ng"><h4 class="as cx fk au ax"><button class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs">199 </button></h4></div></div></div></div><div><div class="bx"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5&amp;source=post_sidebar--------------------------bookmark_sidebar-" class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs" rel="noopener"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></a></div></div></div></div></div></div></div><div class="pr uz mh s nh ni nj nk mj nl"></div><div><div class="nm ij n dr p"><div class="n p"><div class="ac ae af ag ah ec aj ak"><div class="n nn"></div><div class="n o nn"></div><div class="no r"><ul class="bg bh"><li class="bx cj np nq"><a href="https://towardsdatascience.com/tag/machine-learning" class="nr ns by ax r jf nt a b cy">Machine Learning</a></li><li class="bx cj np nq"><a href="https://towardsdatascience.com/tag/data-science" class="nr ns by ax r jf nt a b cy">Data Science</a></li><li class="bx cj np nq"><a href="https://towardsdatascience.com/tag/saas" class="nr ns by ax r jf nt a b cy">SaaS</a></li></ul></div><div class="nu n fa ab"><div class="n o"><div class="nv r im"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5&amp;source=post_actions_footer-----2d454e5fd9a5---------------------clap_footer-" class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs" rel="noopener"><div class="c nw fe n o nx im ny nz oa ob oc od oe of og oh oi oj ok bs"><div class="bg mx my mz na nb ol se o iz fe n p om u iq ds t ak ba ne bk on"><svg width="33" height="33" viewBox="0 0 33 33"><path d="M28.86 17.34l-3.64-6.4c-.3-.43-.71-.73-1.16-.8a1.12 1.12 0 0 0-.9.21c-.62.5-.73 1.18-.32 2.06l1.22 2.6 1.4 2.45c2.23 4.09 1.51 8-2.15 11.66a9.6 9.6 0 0 1-.8.71 6.53 6.53 0 0 0 4.3-2.1c3.82-3.82 3.57-7.87 2.05-10.39zm-6.25 11.08c3.35-3.35 4-6.78 1.98-10.47L21.2 12c-.3-.43-.71-.72-1.16-.8a1.12 1.12 0 0 0-.9.22c-.62.49-.74 1.18-.32 2.06l1.72 3.63a.5.5 0 0 1-.81.57l-8.91-8.9a1.33 1.33 0 0 0-1.89 1.88l5.3 5.3a.5.5 0 0 1-.71.7l-5.3-5.3-1.49-1.49c-.5-.5-1.38-.5-1.88 0a1.34 1.34 0 0 0 0 1.89l1.49 1.5 5.3 5.28a.5.5 0 0 1-.36.86.5.5 0 0 1-.36-.15l-5.29-5.29a1.34 1.34 0 0 0-1.88 0 1.34 1.34 0 0 0 0 1.89l2.23 2.23L9.3 21.4a.5.5 0 0 1-.36.85.5.5 0 0 1-.35-.14l-3.32-3.33a1.33 1.33 0 0 0-1.89 0 1.32 1.32 0 0 0-.39.95c0 .35.14.69.4.94l6.39 6.4c3.53 3.53 8.86 5.3 12.82 1.35zM12.73 9.26l5.68 5.68-.49-1.04c-.52-1.1-.43-2.13.22-2.89l-3.3-3.3a1.34 1.34 0 0 0-1.88 0 1.33 1.33 0 0 0-.4.94c0 .22.07.42.17.61zm14.79 19.18a7.46 7.46 0 0 1-6.41 2.31 7.92 7.92 0 0 1-3.67.9c-3.05 0-6.12-1.63-8.36-3.88l-6.4-6.4A2.31 2.31 0 0 1 2 19.72a2.33 2.33 0 0 1 1.92-2.3l-.87-.87a2.34 2.34 0 0 1 0-3.3 2.33 2.33 0 0 1 1.24-.64l-.14-.14a2.34 2.34 0 0 1 0-3.3 2.39 2.39 0 0 1 3.3 0l.14.14a2.33 2.33 0 0 1 3.95-1.24l.09.09c.09-.42.29-.83.62-1.16a2.34 2.34 0 0 1 3.3 0l3.38 3.39a2.17 2.17 0 0 1 1.27-.17c.54.08 1.03.35 1.45.76.1-.55.41-1.03.9-1.42a2.12 2.12 0 0 1 1.67-.4 2.8 2.8 0 0 1 1.85 1.25l3.65 6.43c1.7 2.83 2.03 7.37-2.2 11.6zM13.22.48l-1.92.89 2.37 2.83-.45-3.72zm8.48.88L19.78.5l-.44 3.7 2.36-2.84zM16.5 3.3L15.48 0h2.04L16.5 3.3z" fill-rule="evenodd"></path></svg></div></div></a></div><div class="nf r"><div class="ng"><h4 class="as cx fk au ef"><button class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs">199 claps</button></h4></div></div></div><div class="n o"><div class="go r ap"><a href="https://medium.com/p/2d454e5fd9a5/share/twitter?source=post_actions_footer---------------------------" class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs" target="_blank" rel="noopener"><svg width="29" height="29" class="q"><path d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z"></path></svg></a></div><div class="go r ap"><a href="https://medium.com/p/2d454e5fd9a5/share/facebook?source=post_actions_footer---------------------------" class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs" target="_blank" rel="noopener"><svg width="29" height="29" class="q"><path d="M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79"></path></svg></a></div><div class="go r ap"><div><div class="bx"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5&amp;source=post_actions_footer--------------------------bookmark_sidebar-" class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs" rel="noopener"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></a></div></div></div><div class="bx"><div class="bx"><div class="r ap"><button class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs"><svg width="25" height="25" viewBox="-480.5 272.5 21 21" class="q"><path d="M-463 284.6c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5z"></path></svg></button></div></div></div></div></div><div class="oo op oq no r ab"><div class="or os ot ak r"><h2 class="as hi ou ov ef">The best of Towards Data Science, in your inbox.</h2><div class="ow r"></div><h4 class="as cx lw ox ef">Sign up for a free account to follow Towards Data Science. You’ll get their best stories delivered to your email, personalized for you.</h4><div class="oy r"></div><div class="bx"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5&amp;source=follow_footer--------------------------follow_footer-" class="ms bq az ba br bj bk bs bi bt as b at au av aw bu bv bw bx by bl" rel="noopener">Follow</a></div></div><div class="ot oz r im"><span class="r pa an pb"><div class="r ds pc pd"><a href="https://towardsdatascience.com/@carldawson?source=follow_footer--------------------------follow_footer-" rel="noopener"><img alt="Carl Dawson" class="r fe cq pe" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/1_KujqWHnANJii--WXthLB_w(1).jpeg" width="80" height="80"></a></div><span class="r"><div class="pf r pg"><p class="as cx cy au ax da ph">Written by</p></div><div class="pf pi n pg"><div class="ak n o fa"><h2 class="as hi pj pk ef"><a href="https://towardsdatascience.com/@carldawson?source=follow_footer--------------------------follow_footer-" class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs" rel="noopener">Carl Dawson</a></h2><div class="r g"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5&amp;source=follow_footer-d08ce10ab60-------------------------follow_footer-" class="ms bq az ba br bj bk bs bi bt as b at au av aw bu bv bw bx by bl" rel="noopener">Follow</a></div></div></div></span></span><div class="pf pl r pg cb"><div class="pm r"><h4 class="as cx lw ox ax"></h4></div><div class="pn po cb"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5&amp;source=follow_footer-d08ce10ab60-------------------------follow_footer-" class="ms bq az ba br bj bk bs bi bt as b at au av aw bu bv bw bx by bl" rel="noopener">Follow</a></div></div></div></div><div class="pp op r ab"><a href="https://medium.com/p/2d454e5fd9a5/responses/show?source=follow_footer--------------------------follow_footer-" class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs" rel="noopener"><span class="pq pr na"><div class="je os bt r ps cb"><span class="az">See responses (3)</span></div></span></a></div></div></div><div class="pt r pu ab"><div class="n p"><div class="ac ae af ag ah ai aj ak"><div class="va r vb"><div class="qq mn ot r"><h2 class="as hi ou ov ef">More From Medium</h2></div><div class="cn n sy nn vc vd ve vf vg vh vi vj vk vl vm vn vo vp vq"><div class="vr vs vt sr vu vv vw st vx vy vz su wa wb wc wd we wf wg wh wi"><div class="ak iq"><div class="r wj"><div class="wk wl vc vd ve wm wn vf vg vh wo wp vi vj vk wq wr vl vm vn ws wt vo vp vq n nn"><div class="vr vs vt sr vu vv wu wv vx vy ww wx wa wb wy sv we wf wz xa wi"><div class="xb r xc f"><h4 class="as cx fk au ax">More from Towards Data Science</h4></div><div class="xd r xe vb"><a class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs r" rel="noopener" href="https://towardsdatascience.com/is-julia-set-to-take-over-python-the-same-way-python-took-over-java-dd0098433e77?source=post_recirc---------0------------------"><div class="xf im"><div class="iq ds ak"><div class="xg r mb mc iq ak me mf"></div></div></div></a></div></div><div class="vr vs vt sr vu vv wu wv vx vy ww wx wa wb wy sv we wf wz xa wi"><div class="xd r"><div class="xh pn h xi"><h4 class="as cx fk au ax">More from Towards Data Science</h4></div><a rel="noopener" href="https://towardsdatascience.com/is-julia-set-to-take-over-python-the-same-way-python-took-over-java-dd0098433e77?source=post_recirc---------0------------------"><h3 class="ef q eg ua at ex ey xj">Is Julia Set to Take Over Python the Same Way Python Took Over JAVA?</h3></a></div><div class="n o fa"><div class="xk r ci"><div class="o n"><div><a href="https://towardsdatascience.com/@james_52456?source=post_recirc---------0------------------" rel="noopener"><img alt="James Warner" class="r fe xl xm" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/2_Ed2RmDjt3ANaohcVC_UIpg.jpeg" width="40" height="40"></a></div><div class="fh ak r"><div class="n"><div style="flex: 1 1 0%;"><span class="as b at au av aw r ef q"><div class="di n o fj"><span class="as cx fk au cd fl fm fn fo fp ef"><a href="https://towardsdatascience.com/@james_52456?source=post_recirc---------0------------------" class="dc dd bb bc bd be bf bg bh bi fq bl bm fr fs" rel="noopener">James Warner</a><span> in <a href="https://towardsdatascience.com/?source=post_recirc---------0------------------" class="dc dd bb bc bd be bf bg bh bi fq bl bm fr fs" rel="noopener">Towards Data Science</a></span></span></div></span></div></div><span class="as b at au av aw r ax ay"><span class="as cx fk au cd fl fm fn fo fp ax"><div><a class="dc dd bb bc bd be bf bg bh bi fq bl bm fr fs" rel="noopener" href="https://towardsdatascience.com/is-julia-set-to-take-over-python-the-same-way-python-took-over-java-dd0098433e77?source=post_recirc---------0------------------">Dec 4</a> · 5 min read<span style="padding-left: 4px;"><svg class="star-15px_svg__svgIcon-use" width="15" height="15" viewBox="0 0 15 15" style="margin-top: -2px;"><path d="M7.44 2.32c.03-.1.09-.1.12 0l1.2 3.53a.29.29 0 0 0 .26.2h3.88c.11 0 .13.04.04.1L9.8 8.33a.27.27 0 0 0-.1.29l1.2 3.53c.03.1-.01.13-.1.07l-3.14-2.18a.3.3 0 0 0-.32 0L4.2 12.22c-.1.06-.14.03-.1-.07l1.2-3.53a.27.27 0 0 0-.1-.3L2.06 6.16c-.1-.06-.07-.12.03-.12h3.89a.29.29 0 0 0 .26-.19l1.2-3.52z"></path></svg></span></div></span></span></div></div></div><div class="n o"><div class="n o"><div class="mw r im"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5&amp;source=post_recirc-----dd0098433e77----0-----------------clap_preview-" class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs" rel="noopener"><div class="bg mx my mz na nb nc se sa xn xo"><svg width="25" height="25" viewBox="0 0 25 25"><g fill-rule="evenodd"><path d="M11.74 0l.76 2.97.76-2.97zM14.81 3.78l1.84-2.56-1.42-.47zM8.38 1.22l1.84 2.56L9.8.75zM20.38 21.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M7.1 21.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L4.1 14.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L4.4 10.26 3.22 9.08a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L9.96 13a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L6.43 8.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L18.63 14c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM11 5.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 21 22.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z"></path></g></svg></div></a></div><div class="nf r"><div class="ng"><h4 class="as cx fk au ax">1.7K </h4></div></div></div><div class="xp fh xk cr xq r"></div><div><div class="bx"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5&amp;source=post_recirc---------0-----------------bookmark_sidebar-" class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs" rel="noopener"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></a></div></div></div></div></div></div></div></div></div><div class="vr vs vt sr vu vv vw st vx vy vz su wa wb wc wd we wf wg wh wi"><div class="ak iq"><div class="r wj"><div class="wk wl vc vd ve wm wn vf vg vh wo wp vi vj vk wq wr vl vm vn ws wt vo vp vq n nn"><div class="vr vs vt sr vu vv wu wv vx vy ww wx wa wb wy sv we wf wz xa wi"><div class="xb r xc f"><h4 class="as cx fk au ax">More from Towards Data Science</h4></div><div class="xd r xe vb"><a class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs r" rel="noopener" href="https://towardsdatascience.com/sorry-projects-dont-get-you-jobs-3e5d8e74bfdc?source=post_recirc---------1------------------"><div class="xf im"><div class="iq ds ak"><div class="xr r mb mc iq ak me mf"></div></div></div></a></div></div><div class="vr vs vt sr vu vv wu wv vx vy ww wx wa wb wy sv we wf wz xa wi"><div class="xd r"><div class="xh pn h xi"><h4 class="as cx fk au ax">More from Towards Data Science</h4></div><a rel="noopener" href="https://towardsdatascience.com/sorry-projects-dont-get-you-jobs-3e5d8e74bfdc?source=post_recirc---------1------------------"><h3 class="ef q eg ua at ex ey xj">Sorry, Projects Don’t Get You Jobs</h3></a></div><div class="n o fa"><div class="xk r ci"><div class="o n"><div><a href="https://towardsdatascience.com/@haebichan?source=post_recirc---------1------------------" rel="noopener"><div class="im xm xl"><div class="us n sy o p ds xs xt xu ni xv dw"><svg width="49" height="49" viewBox="0 0 49 49"><path fill-rule="evenodd" clip-rule="evenodd" d="M24.5 1.1c-9.39 0-17.53 5.55-21.51 13.66L2 14.28C6.15 5.82 14.66 0 24.5 0S42.85 5.82 47 14.28l-.99.48C42.03 6.65 33.9 1.1 24.5 1.1zM2.99 34.24C6.97 42.35 15.1 47.9 24.5 47.9c9.39 0 17.53-5.55 21.51-13.66l.99.48C42.85 43.18 34.34 49 24.5 49S6.15 43.18 2 34.72l.99-.48z"></path></svg></div><img alt="Haebichan Jung" class="r fe xl xm" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/2_DonWl0rUh9p5AUVCAPTRrg.png" width="40" height="40"></div></a></div><div class="fh ak r"><div class="n"><div style="flex: 1 1 0%;"><span class="as b at au av aw r ef q"><div class="di n o fj"><span class="as cx fk au cd fl fm fn fo fp ef"><a href="https://towardsdatascience.com/@haebichan?source=post_recirc---------1------------------" class="dc dd bb bc bd be bf bg bh bi fq bl bm fr fs" rel="noopener">Haebichan Jung</a><span> in <a href="https://towardsdatascience.com/?source=post_recirc---------1------------------" class="dc dd bb bc bd be bf bg bh bi fq bl bm fr fs" rel="noopener">Towards Data Science</a></span></span></div></span></div></div><span class="as b at au av aw r ax ay"><span class="as cx fk au cd fl fm fn fo fp ax"><div><a class="dc dd bb bc bd be bf bg bh bi fq bl bm fr fs" rel="noopener" href="https://towardsdatascience.com/sorry-projects-dont-get-you-jobs-3e5d8e74bfdc?source=post_recirc---------1------------------">Dec 2</a> · 12 min read<span style="padding-left: 4px;"><svg class="star-15px_svg__svgIcon-use" width="15" height="15" viewBox="0 0 15 15" style="margin-top: -2px;"><path d="M7.44 2.32c.03-.1.09-.1.12 0l1.2 3.53a.29.29 0 0 0 .26.2h3.88c.11 0 .13.04.04.1L9.8 8.33a.27.27 0 0 0-.1.29l1.2 3.53c.03.1-.01.13-.1.07l-3.14-2.18a.3.3 0 0 0-.32 0L4.2 12.22c-.1.06-.14.03-.1-.07l1.2-3.53a.27.27 0 0 0-.1-.3L2.06 6.16c-.1-.06-.07-.12.03-.12h3.89a.29.29 0 0 0 .26-.19l1.2-3.52z"></path></svg></span></div></span></span></div></div></div><div class="n o"><div class="n o"><div class="mw r im"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5&amp;source=post_recirc-----3e5d8e74bfdc----1-----------------clap_preview-" class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs" rel="noopener"><div class="bg mx my mz na nb nc se sa xn xo"><svg width="25" height="25" viewBox="0 0 25 25"><g fill-rule="evenodd"><path d="M11.74 0l.76 2.97.76-2.97zM14.81 3.78l1.84-2.56-1.42-.47zM8.38 1.22l1.84 2.56L9.8.75zM20.38 21.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M7.1 21.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L4.1 14.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L4.4 10.26 3.22 9.08a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L9.96 13a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L6.43 8.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L18.63 14c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM11 5.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 21 22.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z"></path></g></svg></div></a></div><div class="nf r"><div class="ng"><h4 class="as cx fk au ax">2.4K </h4></div></div></div><div class="xp fh xk cr xq r"></div><div><div class="bx"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5&amp;source=post_recirc---------1-----------------bookmark_sidebar-" class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs" rel="noopener"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></a></div></div></div></div></div></div></div></div></div><div class="vr vs vt sr vu vv vw st vx vy vz su wa wb wc wd we wf wg wh wi"><div class="ak iq"><div class="r wj"><div class="wk wl vc vd ve wm wn vf vg vh wo wp vi vj vk wq wr vl vm vn ws wt vo vp vq n nn"><div class="vr vs vt sr vu vv wu wv vx vy ww wx wa wb wy sv we wf wz xa wi"><div class="xb r xc f"><h4 class="as cx fk au ax">More from Towards Data Science</h4></div><div class="xd r xe vb"><a class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs r" rel="noopener" href="https://towardsdatascience.com/the-most-in-demand-tech-skills-for-data-scientists-d716d10c191d?source=post_recirc---------2------------------"><div class="xf im"><div class="iq ds ak"><div class="xw r mb mc iq ak me mf"></div></div></div></a></div></div><div class="vr vs vt sr vu vv wu wv vx vy ww wx wa wb wy sv we wf wz xa wi"><div class="xd r"><div class="xh pn h xi"><h4 class="as cx fk au ax">More from Towards Data Science</h4></div><a rel="noopener" href="https://towardsdatascience.com/the-most-in-demand-tech-skills-for-data-scientists-d716d10c191d?source=post_recirc---------2------------------"><h3 class="ef q eg ua at ex ey xj">The Most In Demand Tech Skills for Data Scientists</h3></a></div><div class="n o fa"><div class="xk r ci"><div class="o n"><div><a href="https://towardsdatascience.com/@jeffhale?source=post_recirc---------2------------------" rel="noopener"><div class="im xm xl"><div class="us n sy o p ds xs xt xu ni xv dw"><svg width="49" height="49" viewBox="0 0 49 49"><path fill-rule="evenodd" clip-rule="evenodd" d="M24.5 1.1c-9.39 0-17.53 5.55-21.51 13.66L2 14.28C6.15 5.82 14.66 0 24.5 0S42.85 5.82 47 14.28l-.99.48C42.03 6.65 33.9 1.1 24.5 1.1zM2.99 34.24C6.97 42.35 15.1 47.9 24.5 47.9c9.39 0 17.53-5.55 21.51-13.66l.99.48C42.85 43.18 34.34 49 24.5 49S6.15 43.18 2 34.72l.99-.48z"></path></svg></div><img alt="Jeff Hale" class="r fe xl xm" src="./Churn Prediction and Prevention in Python - Towards Data Science_files/1_Asb9N4lW4pQN_Id2qwtPOA.jpeg" width="40" height="40"></div></a></div><div class="fh ak r"><div class="n"><div style="flex: 1 1 0%;"><span class="as b at au av aw r ef q"><div class="di n o fj"><span class="as cx fk au cd fl fm fn fo fp ef"><a href="https://towardsdatascience.com/@jeffhale?source=post_recirc---------2------------------" class="dc dd bb bc bd be bf bg bh bi fq bl bm fr fs" rel="noopener">Jeff Hale</a><span> in <a href="https://towardsdatascience.com/?source=post_recirc---------2------------------" class="dc dd bb bc bd be bf bg bh bi fq bl bm fr fs" rel="noopener">Towards Data Science</a></span></span></div></span></div></div><span class="as b at au av aw r ax ay"><span class="as cx fk au cd fl fm fn fo fp ax"><div><a class="dc dd bb bc bd be bf bg bh bi fq bl bm fr fs" rel="noopener" href="https://towardsdatascience.com/the-most-in-demand-tech-skills-for-data-scientists-d716d10c191d?source=post_recirc---------2------------------">Dec 5</a> · 9 min read<span style="padding-left: 4px;"><svg class="star-15px_svg__svgIcon-use" width="15" height="15" viewBox="0 0 15 15" style="margin-top: -2px;"><path d="M7.44 2.32c.03-.1.09-.1.12 0l1.2 3.53a.29.29 0 0 0 .26.2h3.88c.11 0 .13.04.04.1L9.8 8.33a.27.27 0 0 0-.1.29l1.2 3.53c.03.1-.01.13-.1.07l-3.14-2.18a.3.3 0 0 0-.32 0L4.2 12.22c-.1.06-.14.03-.1-.07l1.2-3.53a.27.27 0 0 0-.1-.3L2.06 6.16c-.1-.06-.07-.12.03-.12h3.89a.29.29 0 0 0 .26-.19l1.2-3.52z"></path></svg></span></div></span></span></div></div></div><div class="n o"><div class="n o"><div class="mw r im"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5&amp;source=post_recirc-----d716d10c191d----2-----------------clap_preview-" class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs" rel="noopener"><div class="bg mx my mz na nb nc se sa xn xo"><svg width="25" height="25" viewBox="0 0 25 25"><g fill-rule="evenodd"><path d="M11.74 0l.76 2.97.76-2.97zM14.81 3.78l1.84-2.56-1.42-.47zM8.38 1.22l1.84 2.56L9.8.75zM20.38 21.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M7.1 21.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L4.1 14.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L4.4 10.26 3.22 9.08a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L9.96 13a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L6.43 8.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L18.63 14c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM11 5.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 21 22.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z"></path></g></svg></div></a></div><div class="nf r"><div class="ng"><h4 class="as cx fk au ax">1.1K </h4></div></div></div><div class="xp fh xk cr xq r"></div><div><div class="bx"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5&amp;source=post_recirc---------2-----------------bookmark_sidebar-" class="dc dd bb bc bd be bf bg bh bi gp gq bl bm fr fs" rel="noopener"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></a></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div class="pv r pw px"><section class="do dp ak bw r le lf lg lh li lj lk ll lm ln lo lp lq lr ls"><div class="py pz ot n fa g"><div class="qa n fa"><div class="qb r qc"><div class="qd r"><a href="https://medium.com/about?autoplay=1&amp;source=post_page-----2d454e5fd9a5----------------------" class="dc dd bb bc bd be bf bg bh bi qe qf bl bm qg qh" rel="noopener"><h4 class="qi qj qk as hi at ox ql qm r">Discover Medium</h4></a></div><span class="as b at au av aw r qn qo">Welcome to a place where words matter. On Medium, smart voices and original ideas take center stage - with no ads in sight. <a href="https://medium.com/about?autoplay=1&amp;source=post_page-----2d454e5fd9a5----------------------" class="dc dd bb bc bd be bf bg bh bi bl bm qg qh qp" rel="noopener">Watch</a></span></div><div class="qb r qc"><div class="qq r"><a href="https://medium.com/topics?source=post_page-----2d454e5fd9a5----------------------" class="dc dd bb bc bd be bf bg bh bi qe qf bl bm qg qh" rel="noopener"><h4 class="qi qj qk as hi at ox ql qm r">Make Medium yours</h4></a></div><span class="as b at au av aw r qn qo">Follow all the topics you care about, and we’ll deliver the best stories for you to your homepage and inbox. <a href="https://medium.com/topics?source=post_page-----2d454e5fd9a5----------------------" class="dc dd bb bc bd be bf bg bh bi bl bm qg qh qp" rel="noopener">Explore</a></span></div><div class="qb r qc"><div class="qd r"><a href="https://medium.com/membership?source=post_page-----2d454e5fd9a5----------------------" class="dc dd bb bc bd be bf bg bh bi qe qf bl bm qg qh" rel="noopener"><h4 class="qi qj qk as hi at ox ql qm r">Become a member</h4></a></div><span class="as b at au av aw r qn qo">Get unlimited access to the best stories on Medium — and support writers while you’re at it. Just $5/month. <a href="https://medium.com/membership?source=post_page-----2d454e5fd9a5----------------------" class="dc dd bb bc bd be bf bg bh bi bl bm qg qh qp" rel="noopener">Upgrade</a></span></div></div></div><div class="n o fa"><a href="https://medium.com/?source=post_page-----2d454e5fd9a5----------------------" class="dc dd bb bc bd be bf bg bh bi qe qf bl bm qg qh" rel="noopener"><svg height="22" width="112" viewBox="0 0 111.5 22" class="qj"><path d="M56.3 19.5c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5V19c-.7 1.8-2.4 3-4.3 3-3.3 0-5.8-2.6-5.8-7.5 0-4.5 2.6-7.6 6.3-7.6 1.6-.1 3.1.8 3.8 2.4V3.2c0-.3-.1-.6-.3-.7l-1.4-1.4V1l6.5-.8v19.3zm-4.8-.8V9.5c-.5-.6-1.2-.9-1.9-.9-1.6 0-3.1 1.4-3.1 5.7 0 4 1.3 5.4 3 5.4.8.1 1.6-.3 2-1zm9.1 3.1V9.4c0-.3-.1-.6-.3-.7l-1.4-1.5v-.1h6.5v12.5c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5zm-.2-19.2C60.4 1.2 61.5 0 63 0c1.4 0 2.6 1.2 2.6 2.6S64.4 5.3 63 5.3a2.6 2.6 0 0 1-2.6-2.7zm22.5 16.9c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5v-3.2c-.6 2-2.4 3.4-4.5 3.4-2.9 0-4.4-2.1-4.4-6.2 0-1.9 0-4.1.1-6.5 0-.3-.1-.5-.3-.7L67.7 7v.1H74v8c0 2.6.4 4.4 2 4.4.9-.1 1.7-.6 2.1-1.3V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v12.4zm22 2.3c0-.5.1-6.5.1-7.9 0-2.6-.4-4.5-2.2-4.5-.9 0-1.8.5-2.3 1.3.2.8.3 1.7.3 2.5 0 1.8-.1 4.2-.1 6.5 0 .3.1.5.3.7l1.5 1.4v.1H96c0-.4.1-6.5.1-7.9 0-2.7-.4-4.5-2.2-4.5-.9 0-1.7.5-2.2 1.3v9c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v3.1a4.6 4.6 0 0 1 4.6-3.4c2.2 0 3.6 1.2 4.2 3.5.7-2.1 2.7-3.6 4.9-3.5 2.9 0 4.5 2.2 4.5 6.2 0 1.9-.1 4.2-.1 6.5-.1.3.1.6.3.7l1.4 1.4v.1h-6.6zm-81.4-2l1.9 1.9v.1h-9.8v-.1l2-1.9c.2-.2.3-.4.3-.7V7.3c0-.5 0-1.2.1-1.8L11.4 22h-.1L4.5 6.8c-.1-.4-.2-.4-.3-.6v10c-.1.7 0 1.3.3 1.9l2.7 3.6v.1H0v-.1L2.7 18c.3-.6.4-1.3.3-1.9v-11c0-.5-.1-1.1-.5-1.5L.7 1.1V1h7l5.8 12.9L18.6 1h6.8v.1l-1.9 2.2c-.2.2-.3.5-.3.7v15.2c0 .2.1.5.3.6zm7.6-5.9c0 3.8 1.9 5.3 4.2 5.3 1.9.1 3.6-1 4.4-2.7h.1c-.8 3.7-3.1 5.5-6.5 5.5-3.7 0-7.2-2.2-7.2-7.4 0-5.5 3.5-7.6 7.3-7.6 3.1 0 6.4 1.5 6.4 6.2v.8h-8.7zm0-.8h4.3v-.8c0-3.9-.8-4.9-2-4.9-1.4.1-2.3 1.6-2.3 5.7z"></path></svg></a><span class="as b at au av aw r qn qo"><div class="qr qs n fa qt an"><a href="https://medium.com/about?autoplay=1&amp;source=post_page-----2d454e5fd9a5----------------------" class="dc dd bb bc bd be bf bg bh bi fq bl bm qg qh" rel="noopener">About</a><a href="https://help.medium.com/?source=post_page-----2d454e5fd9a5----------------------" class="dc dd bb bc bd be bf bg bh bi fq bl bm qg qh" rel="noopener">Help</a><a href="https://medium.com/policy/9db0094a1e0f?source=post_page-----2d454e5fd9a5----------------------" class="dc dd bb bc bd be bf bg bh bi fq bl bm qg qh" rel="noopener">Legal</a></div></span></div></section></div></div></div><script src="./Churn Prediction and Prevention in Python - Towards Data Science_files/16180790160.js.download"></script><iframe src="./Churn Prediction and Prevention in Python - Towards Data Science_files/a16180790160.html" hidden="" aria-hidden="true" tabindex="-1" title="Optimizely Internal Frame" height="0" width="0" style="display: none;"></iframe><script>window.__BUILD_ID__ = "development"</script><script>window.__GRAPHQL_URI__ = "https://towardsdatascience.com/_/graphql"</script><script>window.__PRELOADED_STATE__ = {"config":{"nodeEnv":"production","version":"master-20191206-220200-39e9900226","productName":"Medium","publicUrl":"https:\u002F\u002Fcdn-client.medium.com\u002Flite","authDomain":"medium.com","authGoogleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","favicon":"production","glyphUrl":"https:\u002F\u002Fglyph.medium.com","branchKey":"key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm","lightStep":{"name":"lite-web","host":"collector-medium.lightstep.com","token":"ce5be895bef60919541332990ac9fef2","appVersion":"master-20191206-220200-39e9900226"},"algolia":{"appId":"MQ57UUUQZ2","apiKeySearch":"394474ced050e3911ae2249ecc774921","indexPrefix":"medium_","host":"-dsn.algolia.net"},"recaptchaKey":"6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk","sentry":{"dsn":"https:\u002F\u002F589e367c28ca47b195ce200d1507d18b@sentry.io\u002F1423575","environment":"production"},"isAmp":false,"googleAnalyticsCode":"UA-24232453-2","signInWallCustomDomainCollectionIds":["3a8144eabfe3","336d898217ee","61061eb0c96b","138adf9c44c","819cc2aaeee0"],"mediumOwnedAndOperatedCollectionIds":["544c7006046e","bcc38c8f6edf","444d13b52878","8d6b8a439e32","92d2092dc598","1285ba81cada","cb8577c9149e","8ccfed20cbb2","ae2a65f35510","3f6ecf56618","7b6769f2748b","fc8964313712","ef8e90590e66","191186aaafa0","d944778ce714","bdc4052bbdba","88d9857e584e"],"tierOneDomains":["medium.com","thebolditalic.com","arcdigital.media","towardsdatascience.com","uxdesign.cc","codeburst.io","psiloveyou.xyz","writingcooperative.com","entrepreneurshandbook.co","prototypr.io","betterhumans.coach.me","theascent.pub"]},"debug":{"requestId":"499cdb26-c7fc-497e-9afa-a3c37a67e9c4","originalSpanCarrier":{"ot-tracer-spanid":"3c48ef1a1cebec51","ot-tracer-traceid":"0bb821a84d23c805","ot-tracer-sampled":"true"}},"session":{"user":{"id":"lo_mVO5xqakUjD5"},"xsrf":""},"stats":{"itemCount":0,"sending":false,"timeout":null,"backup":{}},"navigation":{"showBranchBanner":null,"hasRenderedBranchBanner":null,"hideGoogleOneTap":false,"hideAlternateUser":false,"branchData":{"loaded":false},"currentLocation":"https:\u002F\u002Ftowardsdatascience.com\u002Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5","host":"towardsdatascience.com","hostname":"towardsdatascience.com","susiModal":{"step":null,"operation":"register","reportEventInfo":{"eventName":"","data":{}}}},"client":{"isBot":false,"isEu":true,"isNativeMedium":false,"isCustomDomain":true},"multiVote":{"clapsPerPost":{}},"metadata":{"faviconImageId":null}}</script><script>window.__APOLLO_STATE__ = {"ROOT_QUERY":{"viewer":null,"variantFlags":[{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.0","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.1","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.2","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.3","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.4","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.5","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.6","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.7","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.8","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.9","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.10","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.11","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.12","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.13","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.14","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.15","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.16","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.17","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.18","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.19","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.20","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.21","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.22","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.23","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.24","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.25","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.26","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.27","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.28","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.29","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.30","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.31","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.32","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.33","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.34","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.35","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.36","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.37","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.38","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.39","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.40","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.41","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.42","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.43","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.44","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.45","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.46","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.47","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.48","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.49","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.50","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.51","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.52","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.53","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.54","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.55","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.56","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.57","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.58","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.59","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.60","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.61","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.62","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.63","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.64","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.65","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.66","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.67","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.68","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.69","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.70","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.71","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.72","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.73","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.74","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.75","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.76","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.77","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.78","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.79","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.80","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.81","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.82","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.83","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.84","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.85","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.86","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.87","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.88","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.89","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.90","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.91","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.92","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.93","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.94","typename":"VariantFlag"}],"meterPost({\"postId\":\"2d454e5fd9a5\",\"postMeteringOptions\":{}})":{"type":"id","generated":false,"id":"MeteringInfo:singleton","typename":"MeteringInfo"},"postResult({\"id\":\"2d454e5fd9a5\"})":{"type":"id","generated":false,"id":"Post:2d454e5fd9a5","typename":"Post"}},"ROOT_QUERY.variantFlags.0":{"name":"allow_access","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.0.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.0.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.1":{"name":"allow_signup","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.1.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.1.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.2":{"name":"allow_test_auth","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.2.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.2.valueType":{"__typename":"VariantFlagString","value":"disallow"},"ROOT_QUERY.variantFlags.3":{"name":"available_annual_plan","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.3.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.3.valueType":{"__typename":"VariantFlagString","value":"2c754bcc2995"},"ROOT_QUERY.variantFlags.4":{"name":"available_monthly_plan","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.4.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.4.valueType":{"__typename":"VariantFlagString","value":"60e220181034"},"ROOT_QUERY.variantFlags.5":{"name":"browsable_stream_config_bucket","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.5.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.5.valueType":{"__typename":"VariantFlagString","value":"curated-topics"},"ROOT_QUERY.variantFlags.6":{"name":"delay_recirc_query","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.6.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.6.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.7":{"name":"digest_delivery_window_six_to_seven","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.7.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.7.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.8":{"name":"disable_gosocial_followers_that_you_follow","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.8.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.8.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.9":{"name":"disable_ios_resume_reading_toast","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.9.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.9.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.10":{"name":"disable_mobile_featured_chunk","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.10.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.10.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.11":{"name":"disable_post_recommended_from_friends_provider","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.11.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.11.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.12":{"name":"enable_annual_renewal_reminder_email","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.12.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.12.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.13":{"name":"enable_app_flirty_thirty","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.13.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.13.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.14":{"name":"enable_automated_mission_control_triggers","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.14.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.14.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.15":{"name":"enable_branch_io","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.15.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.15.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.16":{"name":"enable_branding","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.16.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.16.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.17":{"name":"enable_branding_fonts","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.17.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.17.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.18":{"name":"enable_dedicated_series_tab_api_ios","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.18.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.18.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.19":{"name":"enable_different_grid","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.19.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.19.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.20":{"name":"enable_disregard_trunc_state_for_footer","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.20.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.20.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.21":{"name":"enable_edit_alt_text","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.21.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.21.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.22":{"name":"enable_email_sign_in_captcha","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.22.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.22.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.23":{"name":"enable_embedding_based_diversification","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.23.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.23.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.24":{"name":"enable_expanded_feature_chunk_pool","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.24.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.24.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.25":{"name":"enable_filter_by_resend_rules","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.25.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.25.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.26":{"name":"enable_first_name_on_blocker_banner","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.26.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.26.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.27":{"name":"enable_first_name_on_paywall","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.27.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.27.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.28":{"name":"enable_google_one_tap","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.28.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.28.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.29":{"name":"enable_inline_search_lite","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.29.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.29.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.30":{"name":"enable_inline_search_popover_lite","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.30.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.30.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.31":{"name":"enable_ios_post_stats","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.31.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.31.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.32":{"name":"enable_janky_spam_rules","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.32.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.32.valueType":{"__typename":"VariantFlagString","value":"users,posts"},"ROOT_QUERY.variantFlags.33":{"name":"enable_kafka_events","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.33.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.33.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.34":{"name":"enable_lite_notifications","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.34.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.34.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.35":{"name":"enable_lite_post","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.35.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.35.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.36":{"name":"enable_lite_post_cd","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.36.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.36.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.37":{"name":"enable_lite_post_highlights","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.37.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.37.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.38":{"name":"enable_lite_post_highlights_view_only","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.38.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.38.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.39":{"name":"enable_lite_profile","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.39.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.39.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.40":{"name":"enable_lite_pub_header_menu","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.40.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.40.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.41":{"name":"enable_lite_read_next","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.41.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.41.valueType":{"__typename":"VariantFlagString","value":"sidebar"},"ROOT_QUERY.variantFlags.42":{"name":"enable_lite_server_upstream_deadlines","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.42.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.42.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.43":{"name":"enable_lite_stories","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.43.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.43.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.44":{"name":"enable_lite_topics","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.44.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.44.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.45":{"name":"enable_lite_unread_notification_count_mutation","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.45.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.45.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.46":{"name":"enable_lo_scroll_away_metabar","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.46.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.46.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.47":{"name":"enable_logged_out_homepage_signup","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.47.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.47.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.48":{"name":"enable_marketing_emails","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.48.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.48.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.49":{"name":"enable_media_resource_try_catch","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.49.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.49.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.50":{"name":"enable_membership_remove_section_a","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.50.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.50.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.51":{"name":"enable_membership_thank_you_email","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.51.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.51.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.52":{"name":"enable_more_branch_data","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.52.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.52.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.53":{"name":"enable_multi_day_pub_digests","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.53.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.53.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.54":{"name":"enable_new_collaborative_filtering_data","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.54.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.54.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.55":{"name":"enable_new_gdpr_partner_export","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.55.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.55.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.56":{"name":"enable_new_partner_dashboard","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.56.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.56.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.57":{"name":"enable_new_pub_fonts","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.57.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.57.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.58":{"name":"enable_new_pub_modules","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.58.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.58.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.59":{"name":"enable_new_suspended_page","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.59.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.59.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.60":{"name":"enable_new_three_dot_menu","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.60.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.60.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.61":{"name":"enable_new_withholding_copy","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.61.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.61.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.62":{"name":"enable_optimizely","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.62.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.62.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.63":{"name":"enable_parsely","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.63.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.63.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.64":{"name":"enable_patronus_on_kubernetes","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.64.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.64.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.65":{"name":"enable_popularity_feature_exp_retrain","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.65.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.65.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.66":{"name":"enable_post_import","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.66.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.66.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.67":{"name":"enable_post_settings_screen","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.67.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.67.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.68":{"name":"enable_primary_topic_for_mobile","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.68.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.68.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.69":{"name":"enable_pubs_cta_follow","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.69.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.69.valueType":{"__typename":"VariantFlagString","value":"explicit_about_email"},"ROOT_QUERY.variantFlags.70":{"name":"enable_removing_your_digest_from_subject_line","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.70.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.70.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.71":{"name":"enable_rito_upstream_deadlines","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.71.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.71.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.72":{"name":"enable_rtr_channel","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.72.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.72.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.73":{"name":"enable_save_to_medium","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.73.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.73.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.74":{"name":"enable_sign_up_with_email","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.74.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.74.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.75":{"name":"enable_stripe_express_initial_expansion_copy","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.75.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.75.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.76":{"name":"enable_stripe_express_rest_of_world_copy","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.76.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.76.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.77":{"name":"enable_suggest_account","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.77.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.77.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.78":{"name":"enable_suggest_account_li","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.78.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.78.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.79":{"name":"enable_susi_font_changes","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.79.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.79.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.80":{"name":"enable_tick_landing_page","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.80.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.80.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.81":{"name":"enable_tipalti_onboarding","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.81.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.81.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.82":{"name":"enable_topic_lifecycle_email","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.82.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.82.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.83":{"name":"enable_tribute_landing_page","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.83.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.83.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.84":{"name":"enable_trumpland_landing_page","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.84.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.84.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.85":{"name":"glyph_font_set","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.85.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.85.valueType":{"__typename":"VariantFlagString","value":"m2"},"ROOT_QUERY.variantFlags.86":{"name":"google_sign_in_android","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.86.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.86.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.87":{"name":"is_not_medium_subscriber","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.87.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.87.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.88":{"name":"new_transition_page","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.88.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.88.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.89":{"name":"pub_sidebar","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.89.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.89.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.90":{"name":"rank_model","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.90.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.90.valueType":{"__typename":"VariantFlagString","value":"default"},"ROOT_QUERY.variantFlags.91":{"name":"redis_read_write_splitting","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.91.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.91.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.92":{"name":"signin_services","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.92.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.92.valueType":{"__typename":"VariantFlagString","value":"twitter,facebook,google,email,google-fastidv,google-one-tap"},"ROOT_QUERY.variantFlags.93":{"name":"signup_services","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.93.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.93.valueType":{"__typename":"VariantFlagString","value":"twitter,facebook,google,email,google-fastidv,google-one-tap"},"ROOT_QUERY.variantFlags.94":{"name":"use_new_admin_topic_backend","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.94.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.94.valueType":{"__typename":"VariantFlagBoolean","value":true},"MeteringInfo:singleton":{"__typename":"MeteringInfo","postIds":{"type":"json","json":["2d454e5fd9a5"]},"maxUnlockCount":3,"unlocksRemaining":2},"Post:2d454e5fd9a5":{"__typename":"Post","visibility":"LOCKED","latestPublishedVersion":"6020b04f5fd5","collection":{"type":"id","generated":false,"id":"Collection:7f60cf5620c9","typename":"Collection"},"id":"2d454e5fd9a5","creator":{"type":"id","generated":false,"id":"User:d08ce10ab60","typename":"User"},"isLocked":true,"lockedSource":"LOCKED_POST_SOURCE_UGC","sequence":null,"mediumUrl":"https:\u002F\u002Ftowardsdatascience.com\u002Fchurn-prediction-and-prevention-in-python-2d454e5fd9a5","canonicalUrl":"","content({\"postMeteringOptions\":{}})":{"type":"id","generated":true,"id":"$Post:2d454e5fd9a5.content({\"postMeteringOptions\":{}})","typename":"PostContent"},"firstPublishedAt":1551965760000,"isPublished":true,"layerCake":3,"primaryTopic":{"type":"id","generated":false,"id":"data-science","typename":"Topic"},"title":"Churn Prediction and Prevention in Python","isLimitedState":false,"pendingCollection":null,"shareKey":null,"statusForCollection":"APPROVED","readingTime":13.593396226415093,"readingList":"READING_LIST_NONE","license":"ALL_RIGHTS_RESERVED","allowResponses":true,"tags":[{"type":"id","generated":false,"id":"Tag:machine-learning","typename":"Tag"},{"type":"id","generated":false,"id":"Tag:data-science","typename":"Tag"},{"type":"id","generated":false,"id":"Tag:saas","typename":"Tag"}],"viewerClapCount":0,"clapCount":199,"voterCount":68,"recommenders":[],"responsesCount":3,"collaborators":[],"translationSourcePost":null,"newsletterId":"","inResponseToPostResult":null,"inResponseToMediaResource":null,"curationEligibleAt":1551980134426,"audioVersionUrl":"","seoTitle":"","socialTitle":"","socialDek":"","metaDescription":"","latestPublishedAt":1567002232501,"wordCount":3218,"previewContent":{"type":"id","generated":true,"id":"$Post:2d454e5fd9a5.previewContent","typename":"PreviewContent"},"previewImage":{"type":"id","generated":false,"id":"ImageMetadata:0*CHF7g5Tqt6580WQh.png","typename":"ImageMetadata"},"updatedAt":1567002232748,"topics":[{"type":"id","generated":false,"id":"machine-learning","typename":"Topic"},{"type":"id","generated":false,"id":"data-science","typename":"Topic"},{"type":"id","generated":false,"id":"programming","typename":"Topic"}],"seoDescription":"","isSuspended":false},"Collection:7f60cf5620c9":{"id":"7f60cf5620c9","domain":"towardsdatascience.com","slug":"towards-data-science","__typename":"Collection","googleAnalyticsId":"UA-19707169-24","colorBehavior":"ACCENT_COLOR_AND_FILL_BACKGROUND","name":"Towards Data Science","logo":{"type":"id","generated":false,"id":"ImageMetadata:1*5EUO1kUYBthpOCPzRj_l2g.png","typename":"ImageMetadata"},"avatar":{"type":"id","generated":false,"id":"ImageMetadata:1*F0LADxTtsKOgmPa-_7iUEQ.jpeg","typename":"ImageMetadata"},"isEnrolledInHightower":false,"creator":{"type":"id","generated":false,"id":"User:895063a310f4","typename":"User"},"viewerIsEditor":false,"navItems":[{"type":"id","generated":true,"id":"Collection:7f60cf5620c9.navItems.0","typename":"NavItem"},{"type":"id","generated":true,"id":"Collection:7f60cf5620c9.navItems.1","typename":"NavItem"},{"type":"id","generated":true,"id":"Collection:7f60cf5620c9.navItems.2","typename":"NavItem"},{"type":"id","generated":true,"id":"Collection:7f60cf5620c9.navItems.3","typename":"NavItem"},{"type":"id","generated":true,"id":"Collection:7f60cf5620c9.navItems.4","typename":"NavItem"},{"type":"id","generated":true,"id":"Collection:7f60cf5620c9.navItems.5","typename":"NavItem"},{"type":"id","generated":true,"id":"Collection:7f60cf5620c9.navItems.6","typename":"NavItem"},{"type":"id","generated":true,"id":"Collection:7f60cf5620c9.navItems.7","typename":"NavItem"}],"colorPalette":{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette","typename":"ColorPalette"},"viewerCanEditOwnPosts":false,"viewerCanEditPosts":false,"description":"Sharing concepts, ideas, and codes.","viewerIsFollowing":false,"viewerIsSubscribedToLetters":false,"isUserSubscribedToCollectionEmails":false,"ampEnabled":false,"twitterUsername":"TDataScience","facebookPageId":null,"favicon":{"type":"id","generated":false,"id":"ImageMetadata:1*F0LADxTtsKOgmPa-_7iUEQ.jpeg","typename":"ImageMetadata"}},"User:d08ce10ab60":{"id":"d08ce10ab60","__typename":"User","isSuspended":false,"allowNotes":true,"name":"Carl Dawson","isFollowing":false,"username":"carldawson","bio":"","imageId":"1*KujqWHnANJii--WXthLB_w.jpeg","mediumMemberAt":0,"isBlocking":false,"isPartnerProgramEnrolled":false,"twitterScreenName":""},"ImageMetadata:1*5EUO1kUYBthpOCPzRj_l2g.png":{"id":"1*5EUO1kUYBthpOCPzRj_l2g.png","originalWidth":1010,"originalHeight":376,"__typename":"ImageMetadata"},"ImageMetadata:1*F0LADxTtsKOgmPa-_7iUEQ.jpeg":{"id":"1*F0LADxTtsKOgmPa-_7iUEQ.jpeg","__typename":"ImageMetadata"},"User:895063a310f4":{"id":"895063a310f4","__typename":"User"},"Collection:7f60cf5620c9.navItems.0":{"title":"Data Science","url":"https:\u002F\u002Ftowardsdatascience.com\u002Fdata-science\u002Fhome","type":"TOPIC_PAGE","__typename":"NavItem"},"Collection:7f60cf5620c9.navItems.1":{"title":"Machine Learning","url":"https:\u002F\u002Ftowardsdatascience.com\u002Fmachine-learning\u002Fhome","type":"TOPIC_PAGE","__typename":"NavItem"},"Collection:7f60cf5620c9.navItems.2":{"title":"Programming","url":"https:\u002F\u002Ftowardsdatascience.com\u002Fprogramming\u002Fhome","type":"TOPIC_PAGE","__typename":"NavItem"},"Collection:7f60cf5620c9.navItems.3":{"title":"Visualization","url":"https:\u002F\u002Ftowardsdatascience.com\u002Fdata-visualization\u002Fhome","type":"TOPIC_PAGE","__typename":"NavItem"},"Collection:7f60cf5620c9.navItems.4":{"title":"AI","url":"https:\u002F\u002Ftowardsdatascience.com\u002Fartificial-intelligence\u002Fhome","type":"TOPIC_PAGE","__typename":"NavItem"},"Collection:7f60cf5620c9.navItems.5":{"title":"Picks","url":"https:\u002F\u002Ftowardsdatascience.com\u002Four-picks\u002Fhome","type":"TOPIC_PAGE","__typename":"NavItem"},"Collection:7f60cf5620c9.navItems.6":{"title":"More","url":"https:\u002F\u002Ftowardsdatascience.com\u002Fmore\u002Fhome","type":"TOPIC_PAGE","__typename":"NavItem"},"Collection:7f60cf5620c9.navItems.7":{"title":"Contribute","url":"https:\u002F\u002Ftowardsdatascience.com\u002Fcontribute\u002Fhome","type":"EXTERNAL_LINK_NAV_ITEM","__typename":"NavItem"},"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum":{"backgroundColor":"#FF355876","colorPoints":[{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.0","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.1","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.2","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.3","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.4","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.5","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.6","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.7","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.8","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.9","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.10","typename":"ColorPoint"}],"__typename":"ColorSpectrum"},"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.0":{"color":"#FF355876","point":0,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.1":{"color":"#FF4D6C88","point":0.1,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.2":{"color":"#FF637F99","point":0.2,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.3":{"color":"#FF7791A8","point":0.3,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.4":{"color":"#FF8CA2B7","point":0.4,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.5":{"color":"#FF9FB3C6","point":0.5,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.6":{"color":"#FFB2C3D4","point":0.6,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.7":{"color":"#FFC5D2E1","point":0.7,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.8":{"color":"#FFD7E2EE","point":0.8,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.9":{"color":"#FFE9F1FA","point":0.9,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum.colorPoints.10":{"color":"#FFFBFFFF","point":1,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette":{"tintBackgroundSpectrum":{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.tintBackgroundSpectrum","typename":"ColorSpectrum"},"__typename":"ColorPalette","defaultBackgroundSpectrum":{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum","typename":"ColorSpectrum"},"highlightSpectrum":{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum","typename":"ColorSpectrum"}},"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum":{"backgroundColor":"#FFFFFFFF","colorPoints":[{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.0","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.1","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.2","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.3","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.4","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.5","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.6","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.7","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.8","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.9","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.10","typename":"ColorPoint"}],"__typename":"ColorSpectrum"},"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.0":{"color":"#FF668AAA","point":0,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.1":{"color":"#FF61809D","point":0.1,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.2":{"color":"#FF5A7690","point":0.2,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.3":{"color":"#FF546C83","point":0.3,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.4":{"color":"#FF4D6275","point":0.4,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.5":{"color":"#FF455768","point":0.5,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.6":{"color":"#FF3D4C5A","point":0.6,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.7":{"color":"#FF34414C","point":0.7,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.8":{"color":"#FF2B353E","point":0.8,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.9":{"color":"#FF21282F","point":0.9,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.defaultBackgroundSpectrum.colorPoints.10":{"color":"#FF161B1F","point":1,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum":{"backgroundColor":"#FFFFFFFF","colorPoints":[{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.0","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.1","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.2","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.3","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.4","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.5","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.6","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.7","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.8","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.9","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.10","typename":"ColorPoint"}],"__typename":"ColorSpectrum"},"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.0":{"color":"#FFEDF4FC","point":0,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.1":{"color":"#FFE9F2FD","point":0.1,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.2":{"color":"#FFE6F1FD","point":0.2,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.3":{"color":"#FFE2EFFD","point":0.3,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.4":{"color":"#FFDFEEFD","point":0.4,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.5":{"color":"#FFDBECFE","point":0.5,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.6":{"color":"#FFD7EBFE","point":0.6,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.7":{"color":"#FFD4E9FE","point":0.7,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.8":{"color":"#FFD0E7FF","point":0.8,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.9":{"color":"#FFCCE6FF","point":0.9,"__typename":"ColorPoint"},"$Collection:7f60cf5620c9.colorPalette.highlightSpectrum.colorPoints.10":{"color":"#FFC8E4FF","point":1,"__typename":"ColorPoint"},"$Post:2d454e5fd9a5.content({\"postMeteringOptions\":{}})":{"isLockedPreviewOnly":false,"validatedShareKey":"","__typename":"PostContent","bodyModel":{"type":"id","generated":true,"id":"$Post:2d454e5fd9a5.content({\"postMeteringOptions\":{}}).bodyModel","typename":"RichText"}},"data-science":{"name":"Data Science","slug":"data-science","__typename":"Topic","isFollowing":null},"$Post:2d454e5fd9a5.content({\"postMeteringOptions\":{}}).bodyModel.sections.0":{"name":"b712","startIndex":0,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null,"__typename":"Section"},"$Post:2d454e5fd9a5.content({\"postMeteringOptions\":{}}).bodyModel":{"sections":[{"type":"id","generated":true,"id":"$Post:2d454e5fd9a5.content({\"postMeteringOptions\":{}}).bodyModel.sections.0","typename":"Section"}],"paragraphs":[{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_0","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_1","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_2","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_3","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_4","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_5","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_6","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_7","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_8","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_9","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_10","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_11","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_12","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_13","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_14","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_15","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_16","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_17","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_18","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_19","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_20","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_21","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_22","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_23","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_24","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_25","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_26","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_27","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_28","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_29","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_30","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_31","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_32","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_33","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_34","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_35","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_36","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_37","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_38","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_39","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_40","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_41","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_42","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_43","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_44","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_45","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_46","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_47","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_48","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_49","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_50","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_51","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_52","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_53","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_54","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_55","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_56","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_57","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_58","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_59","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_60","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_61","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_62","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_63","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_64","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_65","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_66","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_67","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_68","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_69","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_70","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_71","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_72","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_73","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_74","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_75","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_76","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_77","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_78","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_79","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_80","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_81","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_82","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_83","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_84","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_85","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_86","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_87","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_88","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_89","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_90","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_91","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_92","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_93","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_94","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_95","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_96","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_97","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_98","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_99","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_100","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_101","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_102","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_103","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_104","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_105","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_106","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_107","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_108","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_109","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_110","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_111","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_112","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_113","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_114","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_115","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_116","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_117","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_118","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_119","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_120","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_121","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_122","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_123","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_124","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_125","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_126","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_127","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_128","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_129","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_130","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_131","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_132","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_133","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_134","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_135","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_136","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_137","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_138","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_139","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_140","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_141","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_142","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_143","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_144","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_145","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_146","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_147","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_148","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_149","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_150","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_151","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_152","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_153","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_154","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_155","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_156","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_157","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_158","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_159","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:6020b04f5fd5_160","typename":"Paragraph"}],"__typename":"RichText"},"Paragraph:6020b04f5fd5_0":{"id":"6020b04f5fd5_0","name":"6633","type":"H3","href":null,"layout":null,"metadata":null,"text":"Churn Prediction and Prevention in Python","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_1":{"id":"6020b04f5fd5_1","name":"8782","type":"H4","href":null,"layout":null,"metadata":null,"text":"Using survival analysis to predict and prevent churn in Python with the lifelines package and the Cox Proportional Hazards Model.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_2":{"id":"6020b04f5fd5_2","name":"0f77","type":"P","href":null,"layout":null,"metadata":null,"text":"Churn prediction is difficult. Before you can do anything to prevent customers leaving, you need to know everything from who’s going to leave and when, to how much it will impact your bottom line. In this post I’m going to explain some techniques for churn prediction and prevention using survival analysis.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_3":{"id":"6020b04f5fd5_3","name":"a6ac","type":"H3","href":null,"layout":null,"metadata":null,"text":"Will they, won’t they","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_4":{"id":"6020b04f5fd5_4","name":"054e","type":"P","href":null,"layout":null,"metadata":null,"text":"The way many data analysts try to model this problem is by thinking in black-and-white terms: churn vs no-churn. It’s really easy to view the problem in this way as it’s a pattern we all know — supervised classification.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_5":{"id":"6020b04f5fd5_5","name":"19e8","type":"P","href":null,"layout":null,"metadata":null,"text":"But doing so leaves out a lot of the nuance of the churn prediction problem — the risk, the timelines, the cost of a customer leaving.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_6":{"id":"6020b04f5fd5_6","name":"efa2","type":"P","href":null,"layout":null,"metadata":null,"text":"Nevertheless, let’s start with a classification model and see where we end up.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_7":{"id":"6020b04f5fd5_7","name":"59d5","type":"H3","href":null,"layout":null,"metadata":null,"text":"Our dataset","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_8":{"id":"6020b04f5fd5_8","name":"fdda","type":"P","href":null,"layout":null,"metadata":null,"text":"The dataset we’ll be using is the Kaggle Telco Churn dataset (available here), it contains a little over 7,000 customer records and includes features such as the customer’s monthly spend with the company, the length of time (in months) that they’ve been customers, and whether or not they have various internet service add-ons.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_8.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_8.markups.0":{"type":"A","start":72,"end":76,"href":"https:\u002F\u002Fwww.kaggle.com\u002Fc\u002Ftelco-churn\u002Fdata","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_9":{"id":"6020b04f5fd5_9","name":"8bf9","type":"P","href":null,"layout":null,"metadata":null,"text":"Here’s the first 5 rows (please visit the original article for tables that aren’t just pictures):","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_9.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_9.markups.0":{"type":"A","start":42,"end":58,"href":"https:\u002F\u002Fmachinelearningphd.com\u002Fchurn-prediction-python\u002F","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_10":{"id":"6020b04f5fd5_10","name":"c352","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*cEuhsZhMe5nQSIbN58ihNA.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*cEuhsZhMe5nQSIbN58ihNA.png":{"id":"1*cEuhsZhMe5nQSIbN58ihNA.png","originalHeight":514,"originalWidth":1526,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:6020b04f5fd5_11":{"id":"6020b04f5fd5_11","name":"75f6","type":"P","href":null,"layout":null,"metadata":null,"text":"The first thing you’ll notice is that there are a lot of categorical variables rendered as text values (‘Yes’,’No’,etc.) in the columns, let’s use pd.get_dummies to fix those:","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_11.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_11.markups.0":{"type":"CODE","start":147,"end":161,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_12":{"id":"6020b04f5fd5_12","name":"07b2","type":"PRE","href":null,"layout":null,"metadata":null,"text":"dummies = pd.get_dummies(\n    data[[ 'gender', 'SeniorCitizen', 'Partner', 'Dependents', 'tenure', 'PhoneService', 'MultipleLines', 'InternetService', 'OnlineSecurity', 'OnlineBackup', 'DeviceProtection', 'TechSupport', 'StreamingTV', 'StreamingMovies', 'Contract', 'PaperlessBilling', 'PaymentMethod', 'Churn' ]]\n) \ndata = dummies.join(data[['MonthlyCharges', 'TotalCharges']])","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_12.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_12.markups.0":{"type":"CODE","start":0,"end":378,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_13":{"id":"6020b04f5fd5_13","name":"e87e","type":"P","href":null,"layout":null,"metadata":null,"text":"If you’re following along, you’ll also have to fix some missing values in the TotalCharges column which has made the whole column text instead of numeric:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_14":{"id":"6020b04f5fd5_14","name":"4615","type":"PRE","href":null,"layout":null,"metadata":null,"text":"data['TotalCharges'] = data[['TotalCharges']].replace([' '], '0') data['TotalCharges'] = pd.to_numeric(data['TotalCharges'])","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_14.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_14.markups.0":{"type":"CODE","start":0,"end":124,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_15":{"id":"6020b04f5fd5_15","name":"e9bd","type":"P","href":null,"layout":null,"metadata":null,"text":"Now we have our data in a useable format, let’s visualise it a little:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_16":{"id":"6020b04f5fd5_16","name":"f88d","type":"PRE","href":null,"layout":null,"metadata":null,"text":"from matplotlib import pyplot as plt \nplt.scatter( data['tenure'], data['MonthlyCharges'], c=data['Churn_Yes']) \nplt.xlabel('Customer Tenure (Months)') \nplt.ylabel('Monthly Charges')","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_16.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_16.markups.0":{"type":"CODE","start":0,"end":182,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_17":{"id":"6020b04f5fd5_17","name":"e091","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:0*CHF7g5Tqt6580WQh.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*CHF7g5Tqt6580WQh.png":{"id":"0*CHF7g5Tqt6580WQh.png","originalHeight":534,"originalWidth":806,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:6020b04f5fd5_18":{"id":"6020b04f5fd5_18","name":"3f5f","type":"P","href":null,"layout":null,"metadata":null,"text":"It’s hard to draw any conclusions from this visualisation which compares the customer’s tenure (the thing we’re trying to improve) with their monthly charges. Let’s move on to training a Logistic Regression model to see if we can use these dummy features to predict churn.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_19":{"id":"6020b04f5fd5_19","name":"c7e2","type":"H3","href":null,"layout":null,"metadata":null,"text":"Logistic Regression","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_20":{"id":"6020b04f5fd5_20","name":"a5c7","type":"PRE","href":null,"layout":null,"metadata":null,"text":"from sklearn.linear_model import LogisticRegression \nfrom sklearn.model_selection import train_test_split \nfrom sklearn.metrics import confusion_matrix, accuracy_score ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_20.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_20.markups.0":{"type":"CODE","start":0,"end":168,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_21":{"id":"6020b04f5fd5_21","name":"0dc1","type":"PRE","href":null,"layout":null,"metadata":null,"text":"X_train, X_test, y_train, y_test = train_test_split(data[x_select], data['Churn_Yes']) ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_21.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_21.markups.0":{"type":"CODE","start":0,"end":87,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_22":{"id":"6020b04f5fd5_22","name":"0287","type":"PRE","href":null,"layout":null,"metadata":null,"text":"clf = LogisticRegression(solver='lbfgs', max_iter=1000) clf.fit(X_train, y_train)","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_22.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_22.markups.0":{"type":"CODE","start":0,"end":81,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_23":{"id":"6020b04f5fd5_23","name":"f24f","type":"P","href":null,"layout":null,"metadata":null,"text":"If we train a model without doing any rebalancing of the classes or weighting of the samples, we can achieve an accuracy of 79.9%. That’s not bad for a first attempt.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_24":{"id":"6020b04f5fd5_24","name":"7a09","type":"P","href":null,"layout":null,"metadata":null,"text":"Here’s the confusion matrix for the Logistic Regression model:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_25":{"id":"6020b04f5fd5_25","name":"8dd4","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:0*9sKudQjwv3dVyt3w.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*9sKudQjwv3dVyt3w.png":{"id":"0*9sKudQjwv3dVyt3w.png","originalHeight":560,"originalWidth":646,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:6020b04f5fd5_26":{"id":"6020b04f5fd5_26","name":"6b82","type":"P","href":null,"layout":null,"metadata":null,"text":"What you can see here is that while the overall accuracy is fairly high, the model only identifies the customers who will leave 55% of the time, much closer to random than we’d like.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_27":{"id":"6020b04f5fd5_27","name":"0daa","type":"H3","href":null,"layout":null,"metadata":null,"text":"What’s our goal?","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_28":{"id":"6020b04f5fd5_28","name":"a9dc","type":"P","href":null,"layout":null,"metadata":null,"text":"This is the point in the process where most data scientists (myself included) would double down on trying to improve the accuracy of the model by engineering new features, trying different algorithms, balancing the dataset and so on. But it’s good to stop and ask yourself what your end goal is.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_29":{"id":"6020b04f5fd5_29","name":"d2d1","type":"P","href":null,"layout":null,"metadata":null,"text":"It would be great to know every single customer who will churn, but how much insight would that information really bring? And how would you know what to focus on if you wanted to keep them and how much you could spend to keep them before having them as a customer turned into a loss?","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_30":{"id":"6020b04f5fd5_30","name":"2aec","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s try taking a different perspective.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_31":{"id":"6020b04f5fd5_31","name":"b646","type":"H3","href":null,"layout":null,"metadata":null,"text":"Survival Analysis","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_32":{"id":"6020b04f5fd5_32","name":"2be4","type":"P","href":null,"layout":null,"metadata":null,"text":"What Logistic Regression is doing (under the hood) is assigning a probability to each observation that describes how likely it is to belong to the positive class.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_33":{"id":"6020b04f5fd5_33","name":"f2f0","type":"P","href":null,"layout":null,"metadata":null,"text":"In the case of churn vs no-churn, and any kind of classification, this can seem like a minor annoyance that we have to overcome by selecting a cutoff and rounding the output (\u003C0.5 means 0, \u003E=0.5 means 1). However, if you think about it, this probability is exactly what we want.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_34":{"id":"6020b04f5fd5_34","name":"00a8","type":"P","href":null,"layout":null,"metadata":null,"text":"In any large enough group of customers there are going to be people who have the same attributes \u002F features (that’s the pigeon hole principle at work). Some of those will churn and some of them won’t, and what you’d ideally like to know is the probability of churn for each group. This is what Logistic Regression gives you (before you cutoff and round), but using Logistic Regression in this scenario does have one problem — it’s not clear what time scale it’s predicting for. Enter Survival Analysis.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_35":{"id":"6020b04f5fd5_35","name":"39a3","type":"P","href":null,"layout":null,"metadata":null,"text":"Survival Analysis is a set of methods used in the life sciences (mostly Epidemiology and Pharma research) to determine the probability of patient cohort survival over time. It’s a very large body of work with a great many intricate and statistically sophisticated tools, but we’ll only be using one of them — The Cox Proportional Hazards Model.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_36":{"id":"6020b04f5fd5_36","name":"f059","type":"H3","href":null,"layout":null,"metadata":null,"text":"The Cox Proportional Hazards Model","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_37":{"id":"6020b04f5fd5_37","name":"c012","type":"P","href":null,"layout":null,"metadata":null,"text":"The Cox PH Model is a regression based model that analyses the covariates (features) of a dataset with regards to how long a patient (or customer) survives. It is called the Proportional Hazards model as it describes how each feature proportionally increases risk over the baseline survival rate for a cohort.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_38":{"id":"6020b04f5fd5_38","name":"d311","type":"P","href":null,"layout":null,"metadata":null,"text":"Thanks to the very good and well-documented lifelines package in Python, it is simple to get started using the Cox PH model.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_38.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_38.markups.0":{"type":"CODE","start":44,"end":53,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_39":{"id":"6020b04f5fd5_39","name":"87a1","type":"H3","href":null,"layout":null,"metadata":null,"text":"Applying the CoxPH Model","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_40":{"id":"6020b04f5fd5_40","name":"ed81","type":"P","href":null,"layout":null,"metadata":null,"text":"In most cases, the first thing you’d have to do to your dataset to get it ready for the Cox regression model is create two new features:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_41":{"id":"6020b04f5fd5_41","name":"d7f5","type":"OLI","href":null,"layout":null,"metadata":null,"text":"The ‘age’ of an observation (the difference in time between a patient starting a course of medication and the most recent observation of their status, or in our case the time between a customer joining a service and the most recent observation of whether or not they have churned)","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_42":{"id":"6020b04f5fd5_42","name":"cc5e","type":"OLI","href":null,"layout":null,"metadata":null,"text":"The ‘event’ flag (a binary flag representing if an event had occurred, such as death or churn)","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_43":{"id":"6020b04f5fd5_43","name":"248f","type":"P","href":null,"layout":null,"metadata":null,"text":"Luckily for us, the telco dataset has both of these features already engineered in the tenure and Churn columns.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_43.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_43.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_43.markups.0":{"type":"CODE","start":87,"end":93,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_43.markups.1":{"type":"CODE","start":98,"end":103,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_44":{"id":"6020b04f5fd5_44","name":"ec5e","type":"P","href":null,"layout":null,"metadata":null,"text":"An important thing to note when it comes to doing any kind of matrix-based regression is that Singular Matrices will throw an error in Python (as they should). All this means is that when you create dummy variables, you must throw one of the columns away. (Don’t worry, we’ll still be able to infer the missing category from the remaining variables.)","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_45":{"id":"6020b04f5fd5_45","name":"aa9b","type":"P","href":null,"layout":null,"metadata":null,"text":"Here’s the first 5 rows of our dummied and reduced dataset:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_46":{"id":"6020b04f5fd5_46","name":"fa02","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*LrE6qbfzpmTeVo7x1gDY5Q.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*LrE6qbfzpmTeVo7x1gDY5Q.png":{"id":"1*LrE6qbfzpmTeVo7x1gDY5Q.png","originalHeight":514,"originalWidth":1526,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:6020b04f5fd5_47":{"id":"6020b04f5fd5_47","name":"d82d","type":"P","href":null,"layout":null,"metadata":null,"text":"You can see the Gender_Male has disappeared, as has Partner_No, Dependents_No and so on.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_48":{"id":"6020b04f5fd5_48","name":"98aa","type":"P","href":null,"layout":null,"metadata":null,"text":"Now that we have our dataset in the right format, let’s fit the Cox model:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_49":{"id":"6020b04f5fd5_49","name":"d4ac","type":"PRE","href":null,"layout":null,"metadata":null,"text":"from lifelines import CoxPHFitter ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_49.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_49.markups.0":{"type":"CODE","start":0,"end":34,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_50":{"id":"6020b04f5fd5_50","name":"151f","type":"PRE","href":null,"layout":null,"metadata":null,"text":"cph_train, cph_test = train_test_split(data[x_select], test_size=0.2) \ncph.fit(cph_train, 'tenure', 'Churn_Yes')","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_50.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_50.markups.0":{"type":"CODE","start":0,"end":112,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_51":{"id":"6020b04f5fd5_51","name":"f385","type":"P","href":null,"layout":null,"metadata":null,"text":"There are a few unique things about the lifelines package which can trip up frequent users of Scikit-Learn, the first is that the column that contains the event observations (churn), needs to be in the single dataset that’s passed to the fit call. As such, we can’t split our dataset into four pieces (train and test for X and y) as we would in Logistic Regression, we’ll have to split it in two. For anyone who’s curious, this is very similar to the R syntax, where you specify the relevant columns within a single dataset and the algorithm takes care of removing them from the training data.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_51.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_51.markups.0":{"type":"CODE","start":40,"end":49,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_52":{"id":"6020b04f5fd5_52","name":"c521","type":"P","href":null,"layout":null,"metadata":null,"text":"In the cph.fit call, you have to pass in three different arguments. The first is the dataset that we’ve created using train_test_split, the second is the ‘age’ column (in our case tenure) and the third is the ‘event’ column (Churn_Yes in our case).","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_52.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_52.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_52.markups.0":{"type":"CODE","start":7,"end":14,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_52.markups.1":{"type":"CODE","start":118,"end":134,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_53":{"id":"6020b04f5fd5_53","name":"9559","type":"P","href":null,"layout":null,"metadata":null,"text":"The next unique thing about the lifelines package is the .print_summary method that can be used on models (another thing borrowed from R).","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_53.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_53.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_53.markups.0":{"type":"CODE","start":32,"end":41,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_53.markups.1":{"type":"CODE","start":57,"end":71,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_54":{"id":"6020b04f5fd5_54","name":"2094","type":"P","href":null,"layout":null,"metadata":null,"text":"Here’s our model summary:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_55":{"id":"6020b04f5fd5_55","name":"e1d8","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*9nsFl1lf3Ez-fxl9lWshhQ.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*9nsFl1lf3Ez-fxl9lWshhQ.png":{"id":"1*9nsFl1lf3Ez-fxl9lWshhQ.png","originalHeight":1506,"originalWidth":1508,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:6020b04f5fd5_56":{"id":"6020b04f5fd5_56","name":"0c38","type":"P","href":null,"layout":null,"metadata":null,"text":"There are a few important things to notice about this output.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_57":{"id":"6020b04f5fd5_57","name":"45c7","type":"OLI","href":null,"layout":null,"metadata":null,"text":"We can see the number of observations listed as n=5634 right at the top of the output, next to that we have our number of events (churned customers).","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_58":{"id":"6020b04f5fd5_58","name":"3ea5","type":"OLI","href":null,"layout":null,"metadata":null,"text":"We get the coefficients of our model. These are very important and they tell us how each feature increases risk, so if it’s a positive number that attribute makes a customer more likely to churn, and if it is negative then customers with that feature are less likely to churn.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_58.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_58.markups.0":{"type":"EM","start":97,"end":106,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_59":{"id":"6020b04f5fd5_59","name":"9998","type":"OLI","href":null,"layout":null,"metadata":null,"text":"We get significance codes for our features. A very nice addition!","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_60":{"id":"6020b04f5fd5_60","name":"6b65","type":"OLI","href":null,"layout":null,"metadata":null,"text":"We get the concordance.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_61":{"id":"6020b04f5fd5_61","name":"b1d0","type":"H3","href":null,"layout":null,"metadata":null,"text":"Concordance","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_62":{"id":"6020b04f5fd5_62","name":"1cb9","type":"P","href":null,"layout":null,"metadata":null,"text":"Similar to how you compare Logistic Regression models using accuracy, you can compare between different Cox PH models using the concordance.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_63":{"id":"6020b04f5fd5_63","name":"4b18","type":"P","href":null,"layout":null,"metadata":null,"text":"Simply put, concordance is an assessment of how internally consistent the model is — if it says a particular feature increases risk, the observations that have that feature should be more at risk. If they are the concordance goes up, if they’re not then it decreases.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_64":{"id":"6020b04f5fd5_64","name":"57c9","type":"P","href":null,"layout":null,"metadata":null,"text":"Our model has a concordance of .929 out of 1, so it’s a very good Cox model.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_65":{"id":"6020b04f5fd5_65","name":"6bf6","type":"H3","href":null,"layout":null,"metadata":null,"text":"Plotting the Cox model","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_66":{"id":"6020b04f5fd5_66","name":"3d85","type":"P","href":null,"layout":null,"metadata":null,"text":"Calling the basic .plot function on the model gives us this:","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_66.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_66.markups.0":{"type":"CODE","start":18,"end":23,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_67":{"id":"6020b04f5fd5_67","name":"14c7","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:0*pkwp93jPDVFm4Tp7.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*pkwp93jPDVFm4Tp7.png":{"id":"0*pkwp93jPDVFm4Tp7.png","originalHeight":534,"originalWidth":1190,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:6020b04f5fd5_68":{"id":"6020b04f5fd5_68","name":"0cf4","type":"P","href":null,"layout":null,"metadata":null,"text":"A handy visualisation of the significance and risk effects of the various features.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_69":{"id":"6020b04f5fd5_69","name":"4fed","type":"P","href":null,"layout":null,"metadata":null,"text":"Something else we can do at this point is investigate how the features impact survival over time, like this:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_70":{"id":"6020b04f5fd5_70","name":"9851","type":"PRE","href":null,"layout":null,"metadata":null,"text":"cph.plot_covariate_groups('TotalCharges', groups=[0,4000])","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_70.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_70.markups.0":{"type":"CODE","start":0,"end":58,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_71":{"id":"6020b04f5fd5_71","name":"1bba","type":"P","href":null,"layout":null,"metadata":null,"text":".plot_covariate_groups is a method from the lifelines package which takes a feature name as its first input and a range of groupings for its second. So here we’ll be looking at the different survival curves for customers whose TotalCharges are near zero compared to those whose TotalCharges are closer to 4000. Which looks like this:","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_71.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_71.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_71.markups.0":{"type":"CODE","start":0,"end":22,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_71.markups.1":{"type":"CODE","start":44,"end":53,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_72":{"id":"6020b04f5fd5_72","name":"a4ba","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:0*1kNyFd_9V1fbiJIf.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*1kNyFd_9V1fbiJIf.png":{"id":"0*1kNyFd_9V1fbiJIf.png","originalHeight":536,"originalWidth":774,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:6020b04f5fd5_73":{"id":"6020b04f5fd5_73","name":"1918","type":"P","href":null,"layout":null,"metadata":null,"text":"You can see that customer whose TotalSpend is closer to zero are at a much higher risk for churning (their survival curve drops off) than those whose TotalSpend is closer to 4000.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_74":{"id":"6020b04f5fd5_74","name":"b3a6","type":"H3","href":null,"layout":null,"metadata":null,"text":"Churn Prediction","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_75":{"id":"6020b04f5fd5_75","name":"2012","type":"P","href":null,"layout":null,"metadata":null,"text":"We have a good, working model, now what?","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_76":{"id":"6020b04f5fd5_76","name":"2e96","type":"P","href":null,"layout":null,"metadata":null,"text":"The point of this exercise was to get some usable information to help us make decisions about how to intervene to reduce and prevent churn. So let’s make some predictions.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_77":{"id":"6020b04f5fd5_77","name":"ffbf","type":"P","href":null,"layout":null,"metadata":null,"text":"Unfortunately, there’s not much we can do for the customers who have already left, so let’s select only the remaining customers from our dataset:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_78":{"id":"6020b04f5fd5_78","name":"df55","type":"PRE","href":null,"layout":null,"metadata":null,"text":"censored_subjects = data.loc[data['Churn_Yes'] == 0]","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_78.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_78.markups.0":{"type":"CODE","start":0,"end":52,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_79":{"id":"6020b04f5fd5_79","name":"b3f6","type":"P","href":null,"layout":null,"metadata":null,"text":"In Survival Analysis lingo a censored observation is one which is yet to have an ‘event’, so we’re selecting all those customer who have yet to churn.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_80":{"id":"6020b04f5fd5_80","name":"ad0a","type":"P","href":null,"layout":null,"metadata":null,"text":"Now to predict their survival curves we use the handy method .predict_survival_function like so:","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_80.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_80.markups.0":{"type":"CODE","start":61,"end":87,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_81":{"id":"6020b04f5fd5_81","name":"7434","type":"PRE","href":null,"layout":null,"metadata":null,"text":"unconditioned_sf = cph.predict_survival_function(censored_subjects)","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_81.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_81.markups.0":{"type":"CODE","start":0,"end":67,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_82":{"id":"6020b04f5fd5_82","name":"a5bd","type":"P","href":null,"layout":null,"metadata":null,"text":"You can see that we’ve called these ‘unconditioned’ survival functions, that’s because we know that some of these curves will predict churn before the customer’s current tenure time. We have to condition the predictions on the basis that we know the customers were still with us when the data was collected:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_83":{"id":"6020b04f5fd5_83","name":"b774","type":"PRE","href":null,"layout":null,"metadata":null,"text":"conditioned_sf = unconditioned_sf.apply(lambda c: (c \u002F c.loc[data.loc[c.name, 'tenure']]).clip_upper(1))","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_83.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_83.markups.0":{"type":"CODE","start":0,"end":104,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_84":{"id":"6020b04f5fd5_84","name":"ea93","type":"P","href":null,"layout":null,"metadata":null,"text":"Now we can investigate individual customers and see how the conditioning has affected their survival over the baseline rate:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_85":{"id":"6020b04f5fd5_85","name":"6121","type":"PRE","href":null,"layout":null,"metadata":null,"text":"subject = 12 \nunconditioned_sf[subject].plot(ls=\"--\", color=\"#A60628\", label=\"unconditioned\") \nconditioned_sf[subject].plot(color=\"#A60628\", label=\"conditioned on $T\u003E58$\") plt.legend()","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_85.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_85.markups.0":{"type":"CODE","start":0,"end":184,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_86":{"id":"6020b04f5fd5_86","name":"b9f8","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:0*xOi6bk-oQsl5DU1-.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*xOi6bk-oQsl5DU1-.png":{"id":"0*xOi6bk-oQsl5DU1-.png","originalHeight":532,"originalWidth":788,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:6020b04f5fd5_87":{"id":"6020b04f5fd5_87","name":"cdba","type":"P","href":null,"layout":null,"metadata":null,"text":"As you can see, the fact that we know customer 12 is still a customer after 58 months means his survival curve drops slower than the baseline one for customers similar to him without that condition.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_88":{"id":"6020b04f5fd5_88","name":"0c49","type":"P","href":null,"layout":null,"metadata":null,"text":"That very handy predict_survival_function method has created a matrix containing a survival probability for each remaining customer at each point in time. What we need to do next is use that to select a single number as a prediction for how long the customer will last, which we can use to determine intervention value.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_88.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_88.markups.0":{"type":"CODE","start":16,"end":41,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_89":{"id":"6020b04f5fd5_89","name":"e8ed","type":"P","href":null,"layout":null,"metadata":null,"text":"Depending on the use case you could choose any percentile, but for our case we’ll use the median.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_90":{"id":"6020b04f5fd5_90","name":"1000","type":"PRE","href":null,"layout":null,"metadata":null,"text":"from lifelines.utils import median_survival_times, qth_survival_times ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_90.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_90.markups.0":{"type":"CODE","start":0,"end":70,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_91":{"id":"6020b04f5fd5_91","name":"4911","type":"PRE","href":null,"layout":null,"metadata":null,"text":"predictions_50 = median_survival_times(conditioned_sf) \n# This is the same, but you can change the fraction to get other \n# %tiles.  \n# predictions_50 = qth_survival_times(.50, conditioned_sf)","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_91.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_91.markups.0":{"type":"CODE","start":0,"end":192,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_92":{"id":"6020b04f5fd5_92","name":"8126","type":"P","href":null,"layout":null,"metadata":null,"text":"What that gives us is a single row (in a pandas DataFrame) that has the month number (tenure) where the customer has a 50% likelihood of churning.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_93":{"id":"6020b04f5fd5_93","name":"2da0","type":"P","href":null,"layout":null,"metadata":null,"text":"We can use this single row and by joining it to our data DataFrame can investigate the predicted remaining value a customer has for the business:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_94":{"id":"6020b04f5fd5_94","name":"a962","type":"PRE","href":null,"layout":null,"metadata":null,"text":"values = predictions_50.T.join(data[['MonthlyCharges','tenure']]) values['RemainingValue'] = values['MonthlyCharges'] * (values[0.5] - values['tenure'])","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_94.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_94.markups.0":{"type":"CODE","start":0,"end":152,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_95":{"id":"6020b04f5fd5_95","name":"cea2","type":"P","href":null,"layout":null,"metadata":null,"text":"Here’s the first 5 rows of this new DataFrame:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_96":{"id":"6020b04f5fd5_96","name":"dd00","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*B_vhXE7p-G-hAq4r6RObvQ.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*B_vhXE7p-G-hAq4r6RObvQ.png":{"id":"1*B_vhXE7p-G-hAq4r6RObvQ.png","originalHeight":518,"originalWidth":1186,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:6020b04f5fd5_97":{"id":"6020b04f5fd5_97","name":"d46e","type":"P","href":null,"layout":null,"metadata":null,"text":"The column named 0.5 is the single row we received from our median_survival_times call. If you selected a different percentile, this column would be named differently.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_97.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_97.markups.0":{"type":"CODE","start":60,"end":81,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_98":{"id":"6020b04f5fd5_98","name":"0445","type":"P","href":null,"layout":null,"metadata":null,"text":"What we see here is that by multiplying the MonthlyCharges by the difference between the customer’s current tenure and their median cancellation date, we can get a sense for which customers would inflict the most damage to our top line.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_99":{"id":"6020b04f5fd5_99","name":"bce1","type":"H3","href":null,"layout":null,"metadata":null,"text":"Churn Prevention","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_100":{"id":"6020b04f5fd5_100","name":"19f1","type":"P","href":null,"layout":null,"metadata":null,"text":"Okay, so now we know which customers are the highest risk for churn, but what can we do to keep them?","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_101":{"id":"6020b04f5fd5_101","name":"e728","type":"P","href":null,"layout":null,"metadata":null,"text":"If we go back to our coefficient chart from earlier we can see that the most significant features which impact survival positively are:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_102":{"id":"6020b04f5fd5_102","name":"f92c","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Having a 2 year contract","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_103":{"id":"6020b04f5fd5_103","name":"afa5","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Having a 1 year contract","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_104":{"id":"6020b04f5fd5_104","name":"3c9f","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Paying by Credit Card","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_105":{"id":"6020b04f5fd5_105","name":"3e05","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Paying by Bank Transfer","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_106":{"id":"6020b04f5fd5_106","name":"88d0","type":"P","href":null,"layout":null,"metadata":null,"text":"Beyond these four the increases in survival become minimal and the results aren’t significant anyway. So let’s focus on these four.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_107":{"id":"6020b04f5fd5_107","name":"600e","type":"P","href":null,"layout":null,"metadata":null,"text":"What we need to do to understand how much we can spend to keep customers is compare their survival rates with customer similar to them who instead have each of these four features present:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_108":{"id":"6020b04f5fd5_108","name":"6ee3","type":"PRE","href":null,"layout":null,"metadata":null,"text":"upgrades = ['PaymentMethod_Credit card (automatic)', 'PaymentMethod_Bank transfer (automatic)', 'Contract_One year', 'Contract_Two year'] ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_108.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_108.markups.0":{"type":"CODE","start":0,"end":138,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_109":{"id":"6020b04f5fd5_109","name":"3f7f","type":"PRE","href":null,"layout":null,"metadata":null,"text":"results_dict = {} ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_109.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_109.markups.0":{"type":"CODE","start":0,"end":18,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_110":{"id":"6020b04f5fd5_110","name":"4dc8","type":"PRE","href":null,"layout":null,"metadata":null,"text":"for customer in values.index: \n    actual = data.loc[[customer]] change = data.loc[[customer]]     \n    results_dict[customer] = [cph.predict_median(actual)] \n    for upgrade in upgrades: \n        change[upgrade] = 1 if list(change[upgrade]) == [0] else 0    \n        results_dict[customer].append(cph.predict_median(change))      \n        change[upgrade] = 1 if list(change[upgrade]) == [0] else 0  ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_110.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_110.markups.0":{"type":"CODE","start":0,"end":400,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_111":{"id":"6020b04f5fd5_111","name":"ad07","type":"PRE","href":null,"layout":null,"metadata":null,"text":"results_df = pd.DataFrame(results_dict).T \nresults_df.columns = ['baseline'] + upgrades actions = values.join(results_df).drop([0.5], axis=1)","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_111.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_111.markups.0":{"type":"CODE","start":0,"end":141,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_112":{"id":"6020b04f5fd5_112","name":"fc22","type":"P","href":null,"layout":null,"metadata":null,"text":"What we’re doing here is looping through the customers, changing one feature at a time and storing the predicted median survival for a customer who has that change. What we’re left with at the end is this:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_113":{"id":"6020b04f5fd5_113","name":"5e01","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*Qw5Z677eaXSKWAOj9w_h-g.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*Qw5Z677eaXSKWAOj9w_h-g.png":{"id":"1*Qw5Z677eaXSKWAOj9w_h-g.png","originalHeight":520,"originalWidth":1526,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:6020b04f5fd5_114":{"id":"6020b04f5fd5_114","name":"ac83","type":"P","href":null,"layout":null,"metadata":null,"text":"We can see from this that if we managed to get the first customer to use a Credit Card to make payments that we could increase the survival time by 4 months (25–21 baseline) and so on.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_115":{"id":"6020b04f5fd5_115","name":"3ec5","type":"P","href":null,"layout":null,"metadata":null,"text":"This is a great result which really helps us to see how we can move the needle on keeping customers, but let’s go a step further and see what impact that has financially:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_116":{"id":"6020b04f5fd5_116","name":"e214","type":"PRE","href":null,"layout":null,"metadata":null,"text":"actions['CreditCard Diff'] = ( \n    actions['PaymentMethod_Credit card (automatic)'] -     \n    actions['baseline']\n) * actions['MonthlyCharges'] ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_116.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_116.markups.0":{"type":"CODE","start":0,"end":146,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_117":{"id":"6020b04f5fd5_117","name":"780e","type":"PRE","href":null,"layout":null,"metadata":null,"text":"actions['BankTransfer Diff'] = ( \n    actions['PaymentMethod_Bank transfer (automatic)'] - \n    actions['baseline']\n) * actions['MonthlyCharges'] ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_117.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_117.markups.0":{"type":"CODE","start":0,"end":146,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_118":{"id":"6020b04f5fd5_118","name":"1515","type":"PRE","href":null,"layout":null,"metadata":null,"text":"actions['1yrContract Diff'] = ( \n    actions['Contract_One year'] - actions['baseline']\n) * actions['MonthlyCharges'] ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_118.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_118.markups.0":{"type":"CODE","start":0,"end":118,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_119":{"id":"6020b04f5fd5_119","name":"cacb","type":"PRE","href":null,"layout":null,"metadata":null,"text":"actions['2yrContract Diff'] = ( \n    actions['Contract_Two year'] - actions['baseline']\n) * actions['MonthlyCharges']","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_119.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_119.markups.0":{"type":"CODE","start":0,"end":117,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_120":{"id":"6020b04f5fd5_120","name":"7056","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*-LmwKkjGi7yYahK06c9cZg.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*-LmwKkjGi7yYahK06c9cZg.png":{"id":"1*-LmwKkjGi7yYahK06c9cZg.png","originalHeight":516,"originalWidth":1514,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:6020b04f5fd5_121":{"id":"6020b04f5fd5_121","name":"af33","type":"P","href":null,"layout":null,"metadata":null,"text":"Now we can see that moving the customer in the first row to paying by Credit Card could be worth up to £119.40. That’s much more helpful than a simple count of months.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_122":{"id":"6020b04f5fd5_122","name":"f955","type":"H3","href":null,"layout":null,"metadata":null,"text":"Accuracy and Calibration","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_123":{"id":"6020b04f5fd5_123","name":"d276","type":"P","href":null,"layout":null,"metadata":null,"text":"Okay, we’re nearly done. We have monetary values that we can use to judge whether a particular churn intervention is feasible as well as solid predictions regarding when a customer will churn. But how accurate is all of this?","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_123.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_123.markups.0":{"type":"EM","start":165,"end":169,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_124":{"id":"6020b04f5fd5_124","name":"27b3","type":"P","href":null,"layout":null,"metadata":null,"text":"We know our Cox model is a good one (92.9% concordance), but what does that mean in real terms? How accurate is it?","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_125":{"id":"6020b04f5fd5_125","name":"e6e6","type":"P","href":null,"layout":null,"metadata":null,"text":"When you take a probabilistic view of events like churn (or fraud or theft) it’s important to check for calibration more so than accuracy. Calibration is the propensity of a model to get probabilities right over time.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_126":{"id":"6020b04f5fd5_126","name":"4484","type":"P","href":null,"layout":null,"metadata":null,"text":"Think of it like this, a weather forecasting service is well calibrated if out of all the times it said there was a 40% chance of rain, it actually rained 40% of the time.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_127":{"id":"6020b04f5fd5_127","name":"70b1","type":"P","href":null,"layout":null,"metadata":null,"text":"In Scikit-Learn, we can use the calibration_curve method to derive values from probabilistic predictions and the true values (binary) of our dataset:","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_127.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_127.markups.0":{"type":"CODE","start":32,"end":49,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_128":{"id":"6020b04f5fd5_128","name":"f660","type":"PRE","href":null,"layout":null,"metadata":null,"text":"from sklearn.calibration import calibration_curve ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_128.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_128.markups.0":{"type":"CODE","start":0,"end":50,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_129":{"id":"6020b04f5fd5_129","name":"1e11","type":"PRE","href":null,"layout":null,"metadata":null,"text":"plt.figure(figsize=(10, 10))\n \nax1 = plt.subplot2grid((3, 1), (0, 0), rowspan=2) \nax1.plot([0, 1], [0, 1], \"k:\", label=\"Perfectly calibrated\") ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_129.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_129.markups.0":{"type":"CODE","start":0,"end":143,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_130":{"id":"6020b04f5fd5_130","name":"1951","type":"PRE","href":null,"layout":null,"metadata":null,"text":"probs = 1-np.array(cph.predict_survival_function(cph_test).loc[13])","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_130.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_130.markups.0":{"type":"CODE","start":0,"end":67,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_131":{"id":"6020b04f5fd5_131","name":"7119","type":"PRE","href":null,"layout":null,"metadata":null,"text":"actual = cph_test['Churn_Yes'] ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_131.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_131.markups.0":{"type":"CODE","start":0,"end":31,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_132":{"id":"6020b04f5fd5_132","name":"d948","type":"PRE","href":null,"layout":null,"metadata":null,"text":"fraction_of_positives, mean_predicted_value = \\ calibration_curve(actual, probs, n_bins=10, normalize=False) ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_132.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_132.markups.0":{"type":"CODE","start":0,"end":109,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_133":{"id":"6020b04f5fd5_133","name":"1f4b","type":"PRE","href":null,"layout":null,"metadata":null,"text":"ax1.plot(mean_predicted_value, fraction_of_positives, \"s-\", label=\"%s\" % (\"CoxPH\",)) ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_133.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_133.markups.0":{"type":"CODE","start":0,"end":85,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_134":{"id":"6020b04f5fd5_134","name":"bf5a","type":"PRE","href":null,"layout":null,"metadata":null,"text":"ax1.set_ylabel(\"Fraction of positives\") \nax1.set_ylim([-0.05, 1.05]) ax1.legend(loc=\"lower right\") ax1.set_title('Calibration plots (reliability curve)')","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_134.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_134.markups.0":{"type":"CODE","start":0,"end":153,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_135":{"id":"6020b04f5fd5_135","name":"9cb7","type":"P","href":null,"layout":null,"metadata":null,"text":"Which gives us this:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_136":{"id":"6020b04f5fd5_136","name":"76ea","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:0*LKv63UWICKPwp2w1.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*LKv63UWICKPwp2w1.png":{"id":"0*LKv63UWICKPwp2w1.png","originalHeight":786,"originalWidth":1226,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:6020b04f5fd5_137":{"id":"6020b04f5fd5_137","name":"fb46","type":"P","href":null,"layout":null,"metadata":null,"text":"You read this chart by examining the various probabilities against the fractions that are present in the dataset (in our case the test set).","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_138":{"id":"6020b04f5fd5_138","name":"2158","type":"P","href":null,"layout":null,"metadata":null,"text":"You can see that it’s pretty close the diagonal line which represents perfect calibration. However, our model seems to underpredict risk at the low end (\u003C 50% chance of churn) and slightly overpredict risk at the high end (\u003E 50% chance of churn)","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_139":{"id":"6020b04f5fd5_139","name":"b6bd","type":"P","href":null,"layout":null,"metadata":null,"text":"To get a numeric understanding of how far away the line is from perfect calibration, we can use the brier_score_loss from the Scikit-Learn package:","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_139.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_139.markups.0":{"type":"CODE","start":100,"end":116,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_140":{"id":"6020b04f5fd5_140","name":"39e2","type":"PRE","href":null,"layout":null,"metadata":null,"text":"brier_score_loss( \n    cph_test['Churn_Yes'], 1 - \n    np.array(cph.predict_survival_function(cph_test).loc[13]), pos_label=1 \n)","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_140.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_140.markups.0":{"type":"CODE","start":0,"end":128,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_141":{"id":"6020b04f5fd5_141","name":"7516","type":"P","href":null,"layout":null,"metadata":null,"text":"Those of you with a keen eye may have noticed that I keep indexing at tenure = 13. Because our model works over a range of time periods, we have to inspect the calibration at each step in order to get a feel for accuracy. Let’s do that all in one go:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_142":{"id":"6020b04f5fd5_142","name":"0c22","type":"PRE","href":null,"layout":null,"metadata":null,"text":"loss_dict = {} \nfor i in range(1,73): \n    score = brier_score_loss( \n        cph_test['Churn_Yes'], 1 -    \n        np.array(cph.predict_survival_function(cph_test).loc[i]),   \n        pos_label=1 ) \n    loss_dict[i] = [score] ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_142.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_142.markups.0":{"type":"CODE","start":0,"end":228,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_143":{"id":"6020b04f5fd5_143","name":"6875","type":"PRE","href":null,"layout":null,"metadata":null,"text":"loss_df = pd.DataFrame(loss_dict).T ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_143.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_143.markups.0":{"type":"CODE","start":0,"end":36,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_144":{"id":"6020b04f5fd5_144","name":"c76c","type":"PRE","href":null,"layout":null,"metadata":null,"text":"fig, ax = plt.subplots() \nax.plot(loss_df.index, loss_df) \nax.set(xlabel='Prediction Time', ylabel='Calibration Loss', title='Cox PH Model Calibration Loss \u002F Time') \nax.grid() ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_144.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_144.markups.0":{"type":"CODE","start":0,"end":176,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_145":{"id":"6020b04f5fd5_145","name":"4bcd","type":"PRE","href":null,"layout":null,"metadata":null,"text":"plt.show()","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_145.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_145.markups.0":{"type":"CODE","start":0,"end":10,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_146":{"id":"6020b04f5fd5_146","name":"9845","type":"P","href":null,"layout":null,"metadata":null,"text":"Which gives us this:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_147":{"id":"6020b04f5fd5_147","name":"bba5","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:0*ZiC8xlvmwcgASj92.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*ZiC8xlvmwcgASj92.png":{"id":"0*ZiC8xlvmwcgASj92.png","originalHeight":548,"originalWidth":784,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:6020b04f5fd5_148":{"id":"6020b04f5fd5_148","name":"fea8","type":"P","href":null,"layout":null,"metadata":null,"text":"So we can see that our model is pretty well calibrated between 5 and 25 months and then proceeds to get less and less so as we start to predict further out.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_149":{"id":"6020b04f5fd5_149","name":"9f2f","type":"P","href":null,"layout":null,"metadata":null,"text":"The only remaining thing to do to make our analysis more realistic is account for this poor calibration.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_150":{"id":"6020b04f5fd5_150","name":"22fc","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s create upper and lower bounds for the expected return on investment from getting customers to make changes:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_151":{"id":"6020b04f5fd5_151","name":"d518","type":"PRE","href":null,"layout":null,"metadata":null,"text":"loss_df.columns = ['loss'] \ntemp_df = actions.reset_index().set_index('PaymentMethod_Credit card (automatic)').join(loss_df) \ntemp_df = temp_df.set_index('index') \nactions['CreditCard Lower'] = temp_df['CreditCard Diff'] - (temp_df['loss'] * temp_df['CreditCard Diff']) \nactions['CreditCard Upper'] = temp_df['CreditCard Diff'] + (temp_df['loss'] * temp_df['CreditCard Diff']) ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_151.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_151.markups.0":{"type":"CODE","start":0,"end":377,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_152":{"id":"6020b04f5fd5_152","name":"8864","type":"PRE","href":null,"layout":null,"metadata":null,"text":"temp_df = actions.reset_index().set_index('PaymentMethod_Bank transfer (automatic)').join(loss_df) \ntemp_df = temp_df.set_index('index') \nactions['BankTransfer Lower'] = temp_df['BankTransfer Diff'] - (.5 * temp_df['loss'] * temp_df['BankTransfer Diff']) actions['BankTransfer Upper'] = temp_df['BankTransfer Diff'] + (.5 * temp_df['loss'] * temp_df['BankTransfer Diff']) ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_152.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_152.markups.0":{"type":"CODE","start":0,"end":372,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_153":{"id":"6020b04f5fd5_153","name":"1dd7","type":"PRE","href":null,"layout":null,"metadata":null,"text":"temp_df = actions.reset_index().set_index('Contract_One year').join(loss_df) \ntemp_df = temp_df.set_index('index') \nactions['1yrContract Lower'] = temp_df['1yrContract Diff'] - (.5 * temp_df['loss'] * temp_df['1yrContract Diff']) actions['1yrContract Upper'] = temp_df['1yrContract Diff'] + (.5 * temp_df['loss'] * temp_df['1yrContract Diff']) ","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_153.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_153.markups.0":{"type":"CODE","start":0,"end":344,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_154":{"id":"6020b04f5fd5_154","name":"4912","type":"PRE","href":null,"layout":null,"metadata":null,"text":"temp_df = actions.reset_index().set_index('Contract_Two year').join(loss_df) \ntemp_df = temp_df.set_index('index') \nactions['2yrContract Lower'] = temp_df['2yrContract Diff'] - (.5 * temp_df['loss'] * temp_df['2yrContract Diff']) actions['2yrContract Upper'] = temp_df['2yrContract Diff'] + (.5 * temp_df['loss'] * temp_df['2yrContract Diff'])","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_154.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_154.markups.0":{"type":"CODE","start":0,"end":343,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_155":{"id":"6020b04f5fd5_155","name":"91be","type":"P","href":null,"layout":null,"metadata":null,"text":"Here I’m discounting the value we came up with before to account for the uncertainty with regards to calibration. We look up how well calibrated the model is for each time period we predict that a specific upgrade will produce and create a lower and upper bound around the estimated return on investment.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_156":{"id":"6020b04f5fd5_156","name":"cd8d","type":"P","href":null,"layout":null,"metadata":null,"text":"That gives us something like this:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_157":{"id":"6020b04f5fd5_157","name":"e91e","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*07AkTrjkTh6sbpCwQGWp0w.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*07AkTrjkTh6sbpCwQGWp0w.png":{"id":"1*07AkTrjkTh6sbpCwQGWp0w.png","originalHeight":502,"originalWidth":1266,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:6020b04f5fd5_158":{"id":"6020b04f5fd5_158","name":"a658","type":"P","href":null,"layout":null,"metadata":null,"text":"With that we’ve ended our whirlwind tour of Survival Analysis, Concordance and Calibration. What we’ve got for our efforts is an actionable set of data that we can use to keep customers signed up for longer — which is the point of churn prediction!","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_159":{"id":"6020b04f5fd5_159","name":"c121","type":"P","href":null,"layout":null,"metadata":null,"text":"Thank you for reading!","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:6020b04f5fd5_160":{"id":"6020b04f5fd5_160","name":"e742","type":"MIXTAPE_EMBED","href":null,"layout":null,"metadata":null,"text":"The Machine Learning Roadmap\nBook a call with an experienced machine learning and data science consultant …mlroadmap.com","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_160.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_160.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:6020b04f5fd5_160.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":{"type":"id","generated":true,"id":"$Paragraph:6020b04f5fd5_160.mixtapeMetadata","typename":"MixtapeMetadata"}},"Paragraph:6020b04f5fd5_160.markups.0":{"type":"A","start":0,"end":120,"href":"https:\u002F\u002Fmlroadmap.com","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_160.markups.1":{"type":"STRONG","start":0,"end":28,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:6020b04f5fd5_160.markups.2":{"type":"EM","start":29,"end":107,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"$Paragraph:6020b04f5fd5_160.mixtapeMetadata":{"href":"https:\u002F\u002Fmlroadmap.com","thumbnailImageId":"0*XEPb3KXTI0bxe_h2","mediaResourceId":"0*XEPb3KXTI0bxe_h2","__typename":"MixtapeMetadata"},"Tag:machine-learning":{"id":"machine-learning","displayTitle":"Machine Learning","__typename":"Tag"},"Tag:data-science":{"id":"data-science","displayTitle":"Data Science","__typename":"Tag"},"Tag:saas":{"id":"saas","displayTitle":"SaaS","__typename":"Tag"},"$Post:2d454e5fd9a5.previewContent":{"subtitle":"Using survival analysis to predict and prevent churn in Python with the lifelines package and the Cox Proportional Hazards Model.","__typename":"PreviewContent"},"machine-learning":{"name":"Machine Learning","slug":"machine-learning","__typename":"Topic"},"programming":{"name":"Programming","slug":"programming","__typename":"Topic"}}</script><script src="./Churn Prediction and Prevention in Python - Towards Data Science_files/manifest.b6a68b88.js.download"></script><script src="./Churn Prediction and Prevention in Python - Towards Data Science_files/vendors_main.e8623421.chunk.js.download"></script><script src="./Churn Prediction and Prevention in Python - Towards Data Science_files/main.af548080.chunk.js.download"></script><script src="./Churn Prediction and Prevention in Python - Towards Data Science_files/vendors_screen.collection.packageBuilder_screen.landingpages.pres45_screen.landingpages.tribute_scre_3e410f11.d2f0cb5c.chunk.js.download"></script>
<script src="./Churn Prediction and Prevention in Python - Towards Data Science_files/screen.collection.packageBuilder_screen.landingpages.pres45_screen.landingpages.tribute_screen.post__4767c889.ddfb0e02.chunk.js.download"></script>
<script src="./Churn Prediction and Prevention in Python - Towards Data Science_files/screen.collection.packageBuilder_screen.landingpages.pres45_screen.landingpages.tribute_screen.post__73c4bb05.1ff1b026.chunk.js.download"></script>
<script src="./Churn Prediction and Prevention in Python - Towards Data Science_files/screen.post_screen.post.amp_screen.profile_screen.sequence.library_screen.sequence.post_screen.stori_aba94ffa.2642aefb.chunk.js.download"></script>
<script src="./Churn Prediction and Prevention in Python - Towards Data Science_files/screen.post.e632968f.chunk.js.download"></script><script>window.main();</script><script src="./Churn Prediction and Prevention in Python - Towards Data Science_files/p.js.download" async="" id="parsely-cf"></script></body></html>